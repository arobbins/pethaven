{"version":3,"sources":["app.min.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","_interopRequireDefault","obj","__esModule","default","_vendor2","_componentPetfinder2","_componentMobileMenu2","jQuery","document","ready","init","initCarousel","initFitvid","loadPets","./component-mobile-menu","./component-petfinder","./vendor","2","Object","defineProperty","value","_slideout2","componentMobileMenu","$menu","$menuIcon","$menuContainer","menu","click","toggle","toggleMenu","panel","getElementById","padding","tolerance","side","touch","fadeIn","preventDefault","is","hide","this","toggleClass","slideout","3","_petfinder2","_rx2","_lodash2","componentPetFinder","$grid","$gridContainer","$inputType","$inputBreeds","$inputSize","$inputAge","$buttonClear","selectedFilters","type","breeds","size","age","insertPetsIntoDOM","pets","each","key","pet","breedClasses","index","breed","$t","toLowerCase","createBreedsList","petImage","media","photos","photo","createPetImage","append","id","animal","name","setType","val","initGrid","iso","isotope","itemSelector","percentPosition","masonry","columnWidth","gutter","detectFilterEvents","filterSelection","filter","selectedOptions","result","option","hasOwnProperty","constructFilterClass","$items","finalSelectedOptions","forEach","itemElem","$itemElem","selected","dataset","omitBy","isNull","console","log","selectedWithoutBreeds","constructSelectedOptions","change","onType","keyup","onBreed","onSize","onAge","prop","clearFilters","onClear","on","event","filteredItems","checkForEmptyResults","onFinish","addClass","hasClass","removeClass","Observable","fromPromise","getPets","subscribe","petfinder","imagesLoaded","error","./petfinder","./utils","lodash","rx","4","PF","endpoint","APIkey","$container","getBreeds","animalType","data","url","ajax","dataType","beforeSend","xhr","success","promise","5","Utils","toInitialCase","string","charAt","toUpperCase","slice","el","cls","className","RegExp","test","6","Vendor","slick","fitVids"],"mappings":"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","file":"../../app.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nvar _vendor = require('./vendor');\n\nvar _vendor2 = _interopRequireDefault(_vendor);\n\nvar _componentPetfinder = require('./component-petfinder');\n\nvar _componentPetfinder2 = _interopRequireDefault(_componentPetfinder);\n\nvar _componentMobileMenu = require('./component-mobile-menu');\n\nvar _componentMobileMenu2 = _interopRequireDefault(_componentMobileMenu);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\njQuery(document).ready(function () {\n\n  // Initializing ...\n  _componentMobileMenu2.default.init();\n  _vendor2.default.initCarousel();\n  _vendor2.default.initFitvid();\n  _componentPetfinder2.default.loadPets();\n});\n\n},{\"./component-mobile-menu\":2,\"./component-petfinder\":3,\"./vendor\":6}],2:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slideout = require('slideout');\n\nvar _slideout2 = _interopRequireDefault(_slideout);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar componentMobileMenu = function () {\n\n  var $menu = jQuery('.nav-mobile'),\n      $menuIcon = jQuery('.toggle-button'),\n      $menuContainer = jQuery('.menu-mobile-navigation-container'),\n      $slideoutPanel = jQuery('.slideout-panel');\n\n  var showMobileMenu = function showMobileMenu() {\n\n    $menuContainer.fadeIn('slow');\n\n    $menuIcon.click(function (e) {\n      e.preventDefault();\n\n      if ($menu.is(':visible')) {\n        $menu.hide();\n      } else {\n        $menu.fadeIn();\n      }\n\n      jQuery(this).toggleClass(\"is-active\");\n    });\n  };\n\n  var toggleMenu = function toggleMenu(menu) {\n\n    $menuIcon.click(function () {\n      menu.toggle();\n    });\n  };\n\n  var init = function init() {\n\n    var menu = new _slideout2.default({\n      'panel': document.getElementById('content'),\n      'menu': document.getElementById('menu-mobile'),\n      'padding': 256,\n      'tolerance': 70,\n      'side': 'right',\n      'touch': false\n    });\n\n    toggleMenu(menu);\n    showMobileMenu();\n  };\n\n  return {\n    init: init\n  };\n}();\n\nexports.default = componentMobileMenu;\n\n},{\"slideout\":\"slideout\"}],3:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _petfinder = require('./petfinder');\n\nvar _petfinder2 = _interopRequireDefault(_petfinder);\n\nvar _rx = require('rx');\n\nvar _rx2 = _interopRequireDefault(_rx);\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _utils = require('./utils');\n\nvar _utils2 = _interopRequireDefault(_utils);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// import imagesloaded from 'imagesloaded';\n// import Isotope from 'isotope-layout';\nvar componentPetFinder = function () {\n\n  var $grid = jQuery('.component-pet-finder-grid'),\n      $gridContainer = jQuery('.component-pet-finder'),\n      $spinner = jQuery('.component-pet-finder .spinner'),\n      $inputZipcode = jQuery('.component-pet-finder-filter-zipcode'),\n      $inputType = jQuery('.component-pet-finder-filter-type'),\n      $inputBreeds = jQuery('.component-pet-finder-filter-breed'),\n      $inputSize = jQuery('.component-pet-finder-filter-size'),\n      $inputAge = jQuery('.component-pet-finder-filter-age'),\n      $buttonClear = jQuery('.component-pet-finder-filter-clear'),\n      $msg = jQuery('.component-pet-finder .msg'),\n      selectedFilters = {\n    type: null,\n    breeds: null,\n    size: null,\n    age: null\n  };\n\n  //\n  // Isotope Initing\n  //\n  var loadPets = function loadPets() {\n\n    if ($grid.length) {\n\n      _rx2.default.Observable.fromPromise(_petfinder2.default.getPets()).subscribe(function (pets) {\n\n        insertPetsIntoDOM(pets.petfinder.pets.pet);\n\n        $grid.imagesLoaded(function () {\n\n          jQuery('.component-pet-finder .spinner').addClass('is-hidden');\n\n          if (!$grid.hasClass('is-visible')) {\n            $grid.addClass('is-visible');\n          }\n\n          initGrid();\n        });\n\n        // new imagesloaded('.component-pet-finder-grid', () => {\n        //\n        //   jQuery('.component-pet-finder .spinner').addClass('is-hidden');\n        //\n        //   console.log(\"Images loaded ...\");\n        //\n        //   if (!$grid.hasClass('is-visible')) {\n        //     $grid.addClass('is-visible');\n        //   }\n        //\n        //   initGrid();\n        //\n        // });\n\n      }, function (error) {\n        console.log(\"Error: \", error);\n      });\n    } else {\n      // console.log('NOT loading pets ...');\n    }\n  };\n\n  //\n  // Clear filter\n  //\n  var clearFilters = function clearFilters(iso) {\n\n    $inputType.prop('selectedIndex', 0);\n    $inputSize.prop('selectedIndex', 0);\n    $inputAge.prop('selectedIndex', 0);\n    $inputBreeds.val('');\n\n    selectedFilters = {\n      type: null,\n      breeds: null,\n      size: null,\n      age: null\n    };\n\n    iso.isotope({\n      filter: function filter() {\n        return true;\n      }\n    });\n  };\n\n  //\n  // Construct breed classes\n  //\n  var createBreedsList = function createBreedsList(breeds) {\n    var breedClasses = '';\n\n    if (breeds.length) {\n      jQuery.each(breeds, function (index, breed) {\n        if (breed.$t) {\n          breedClasses = breedClasses += ' ' + breed.$t.toLowerCase();\n        }\n      });\n    } else {\n      breedClasses = breedClasses += ' ' + breeds.$t.toLowerCase();\n    }\n\n    return breedClasses;\n  };\n\n  //\n  // Create Pet Image\n  //\n  var createPetImage = function createPetImage(pet) {\n    var img = 'photos' in pet.media ? pet.media.photos.photo[2].$t : '../../content/themes/pethaven/assets/imgs/pet-img-notfound.jpg';\n\n    return img;\n  };\n\n  //\n  // Insert Pets Into Grid\n  //\n  var insertPetsIntoDOM = function insertPetsIntoDOM(pets) {\n\n    jQuery.each(pets, function (key, pet) {\n\n      var breeds = pet.breeds.breed,\n          breedClasses = createBreedsList(breeds),\n          petImage = createPetImage(pet);\n\n      $grid.append(jQuery(\"<a href='https://www.petfinder.com/petdetail/\" + pet.id.$t + \"' class='grid-item pet-link \" + breedClasses + \"' data-type='\" + pet.animal.$t + \"' data-breeds='\" + breedClasses + \"' data-size='\" + pet.size.$t + \"' data-age='\" + pet.age.$t + \"' target='_blank'><img src=\" + petImage + \" class='pet-image'><h4 class='pet-name'>\" + pet.name.$t + \"</h4><p class='pet-breed'><strong>Breeds</strong>\" + breedClasses + \"</p><p class='pet-age'><strong>Age:</strong> \" + pet.age.$t + \"</p><p class='pet-size'><strong>Size:</strong> \" + pet.size.$t + \"</p></a>\"));\n    });\n  };\n\n  //\n  // Set Animal Type\n  //\n  var setType = function setType() {\n\n    if ($inputType.val().length === 0) {\n      selectedFilters.type = null;\n    } else {\n      selectedFilters.type = $inputType.val();\n    }\n  };\n\n  //\n  // Isotope Initing\n  //\n  var initGrid = function initGrid() {\n\n    if (jQuery('.component-pet-finder-grid').length) {\n\n      var iso = jQuery('.component-pet-finder-grid').isotope({\n        itemSelector: '.grid-item',\n        percentPosition: true,\n        masonry: {\n          columnWidth: '.grid-item',\n          gutter: 2\n        }\n      });\n\n      setType();\n      detectFilterEvents(iso);\n      filterSelection(iso);\n    }\n  };\n\n  function constructFilterClass(selectedOptions) {\n\n    var result = '';\n\n    for (var option in selectedOptions) {\n\n      if (selectedOptions.hasOwnProperty(option)) {\n\n        if (option === 'breeds') {\n          result += '.grid-item[data-' + option + '*=\"' + selectedOptions[option] + '\"]';\n        } else {\n          result += '.grid-item[data-' + option + '=\"' + selectedOptions[option] + '\"]';\n        }\n      }\n    }\n\n    return result;\n  }\n\n  function constructSelectedOptions($items) {\n\n    var finalSelectedOptions;\n\n    $items.forEach(function (itemElem) {\n\n      var $itemElem = jQuery(itemElem)[0];\n\n      var element = {\n        type: $itemElem.dataset.type,\n        breeds: $itemElem.dataset.breeds,\n        size: $itemElem.dataset.size,\n        age: $itemElem.dataset.age\n      };\n\n      // Remove the null values ...\n      var selected = _lodash2.default.omitBy(selectedFilters, _lodash2.default.isNull);\n\n      if (selected.breeds) {\n\n        if (selected.breeds.length > 3) {\n\n          console.log(\"Greater than 3! \", selected.breeds);\n\n          // var elementWithoutBreeds = {\n          //   type: element.type,\n          //   age: element.age,\n          //   size: element.size\n          // };\n\n          var selectedWithoutBreeds = {\n            type: selectedFilters.type,\n            age: selectedFilters.age,\n            size: selectedFilters.size,\n            breeds: selected.breeds\n          };\n\n          console.log(\"zzzzzzz: \", selectedWithoutBreeds);\n\n          finalSelectedOptions = _lodash2.default.omitBy(selectedWithoutBreeds, _lodash2.default.isNull);\n\n          console.log(\"finalSelectedOptions: \", finalSelectedOptions);\n        }\n      } else {\n\n        finalSelectedOptions = selected;\n      }\n    });\n\n    console.log(\"finalSelectedOptions: \", finalSelectedOptions);\n\n    return finalSelectedOptions;\n  }\n\n  //\n  // Filter Selection\n  //\n  var filterSelection = function filterSelection(iso) {\n\n    iso.isotope({\n      itemSelector: '.grid-item',\n      percentPosition: true,\n      masonry: {\n        columnWidth: '.grid-item',\n        gutter: 2\n      },\n      filter: constructFilterClass(constructSelectedOptions(iso.isotope('getItemElements')))\n\n    });\n  };\n\n  //\n  // On filter clearing\n  //\n  var onClear = function onClear(iso) {\n\n    $buttonClear.click(function () {\n\n      clearFilters(iso);\n    });\n  };\n\n  //\n  // On Type change\n  //\n  var onType = function onType(iso) {\n\n    $inputType.change(function () {\n\n      setType();\n      filterSelection(iso);\n    });\n  };\n\n  //\n  // On Breed change\n  //\n  var onBreed = function onBreed(iso) {\n\n    $inputBreeds.keyup(function () {\n\n      if ($inputBreeds.val().length === 0) {\n        selectedFilters.breeds = null;\n      } else {\n        selectedFilters.breeds = $inputBreeds.val().toLowerCase();\n      }\n\n      filterSelection(iso);\n    });\n  };\n\n  //\n  // On Size change\n  //\n  var onSize = function onSize(iso) {\n\n    $inputSize.change(function () {\n      selectedFilters.size = $inputSize.val();\n      filterSelection(iso);\n    });\n  };\n\n  //\n  // On Age change\n  //\n  var onAge = function onAge(iso) {\n\n    $inputAge.change(function () {\n      selectedFilters.age = $inputAge.val();\n      filterSelection(iso);\n    });\n  };\n\n  //\n  // On Finish\n  //\n  var onFinish = function onFinish(iso) {\n\n    iso.on('arrangeComplete', function (event, filteredItems) {\n      console.log(\"filteredItems: \", filteredItems);\n      checkForEmptyResults(filteredItems);\n    });\n  };\n\n  //\n  // Detect Filter Events\n  //\n  var detectFilterEvents = function detectFilterEvents(iso) {\n\n    onType(iso);\n    onBreed(iso);\n    onSize(iso);\n    onAge(iso);\n    onClear(iso);\n    onFinish(iso);\n  };\n\n  //\n  // Check for empty results\n  //\n  var checkForEmptyResults = function checkForEmptyResults(filteredItems) {\n\n    console.log(\"length: \", filteredItems.length);\n\n    if (filteredItems.length === 0) {\n\n      $gridContainer.addClass('is-empty');\n    } else {\n\n      if ($gridContainer.hasClass('is-empty')) {\n        $gridContainer.removeClass('is-empty');\n      }\n    }\n  };\n\n  return {\n    loadPets: loadPets\n  };\n}();\n\nexports.default = componentPetFinder;\n\n},{\"./petfinder\":4,\"./utils\":5,\"lodash\":\"lodash\",\"rx\":\"rx\"}],4:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _rx = require('rx');\n\nvar _rx2 = _interopRequireDefault(_rx);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar PF = function () {\n\n  var endpoint = 'https://api.petfinder.com';\n  var methodBreedList = '/breed.list';\n  var methodFindPets = '/shelter.getPets';\n  var shelterID = 'MN36';\n  var APIkey = '454b72d5b9fc8fca72c7a461a5ac46d2';\n  var format = 'json';\n\n  var $container = jQuery('.component-pet-finder');\n\n  //\n  // Get Breeds\n  //\n  var getBreeds = function getBreeds() {\n\n    var animalType = $container.data(\"animal-type\"),\n        url = endpoint + methodBreedList + '?key=' + APIkey + '&animal=' + animalType + '&format=' + format + '&callback=?';\n\n    return jQuery.ajax({\n      url: url,\n      dataType: 'jsonp',\n      beforeSend: function beforeSend(xhr) {\n        // jQuery('.component-pet-finder .spinner').removeClass('is-hidden');\n      },\n      success: function success() {\n        // jQuery('.component-pet-finder .spinner').addClass('is-hidden');\n      }\n    }).promise();\n  };\n\n  //\n  // Generic search\n  //\n  var getPets = function getPets() {\n\n    var url = endpoint + methodFindPets + '?key=' + APIkey + '&id=' + shelterID + '&count=1000' + '&format=' + format + '&callback=?';\n\n    return jQuery.ajax({\n      url: url,\n      dataType: 'jsonp',\n      beforeSend: function beforeSend(xhr) {\n        jQuery('.component-pet-finder .spinner').removeClass('is-hidden');\n      },\n      success: function success() {}\n    }).promise();\n  };\n\n  return {\n    getBreeds: getBreeds,\n    getPets: getPets\n  };\n}();\n\nexports.default = PF;\n\n},{\"rx\":\"rx\"}],5:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar Utils = function () {\n\n  var toInitialCase = function toInitialCase(string) {\n    return string.charAt(0).toUpperCase() + string.slice(1);\n  };\n\n  var hasClass = function hasClass(el, cls) {\n    return el.className && new RegExp(\"(\\\\s|^)\" + cls + \"(\\\\s|$)\").test(el.className);\n  };\n\n  return {\n    toInitialCase: toInitialCase,\n    hasClass: hasClass\n  };\n}();\n\nexports.default = Utils;\n\n},{}],6:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar Vendor = function () {\n\n  function initCarousel() {\n    jQuery('.component-marquees').slick();\n  }\n\n  function initFitvid() {\n    jQuery(\".component, .content\").fitVids();\n  }\n\n  return {\n    initCarousel: initCarousel,\n    initFitvid: initFitvid\n  };\n}();\n\nexports.default = Vendor;\n\n},{}]},{},[1])\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJhc3NldHMvanMvYXBwL2FwcC5qcyIsImFzc2V0cy9qcy9hcHAvY29tcG9uZW50LW1vYmlsZS1tZW51LmpzIiwiYXNzZXRzL2pzL2FwcC9jb21wb25lbnQtcGV0ZmluZGVyLmpzIiwiYXNzZXRzL2pzL2FwcC9wZXRmaW5kZXIuanMiLCJhc3NldHMvanMvYXBwL3V0aWxzLmpzIiwiYXNzZXRzL2pzL2FwcC92ZW5kb3IuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQ0FBOzs7O0FBQ0E7Ozs7QUFDQTs7Ozs7O0FBRUEsT0FBTyxRQUFQLEVBQWlCLEtBQWpCLENBQXVCLFlBQVc7O0FBRWhDO0FBQ0EsZ0NBQVcsSUFBWDtBQUNBLG1CQUFPLFlBQVA7QUFDQSxtQkFBTyxVQUFQO0FBQ0EsK0JBQUcsUUFBSDtBQUVELENBUkQ7Ozs7Ozs7OztBQ0pBOzs7Ozs7QUFFQSxJQUFNLHNCQUF1QixZQUFXOztBQUV0QyxNQUFJLFFBQVEsT0FBTyxhQUFQLENBQVo7QUFBQSxNQUNJLFlBQVksT0FBTyxnQkFBUCxDQURoQjtBQUFBLE1BRUksaUJBQWlCLE9BQU8sbUNBQVAsQ0FGckI7QUFBQSxNQUdJLGlCQUFpQixPQUFPLGlCQUFQLENBSHJCOztBQUtBLE1BQU0saUJBQWlCLFNBQWpCLGNBQWlCLEdBQU07O0FBRTNCLG1CQUFlLE1BQWYsQ0FBc0IsTUFBdEI7O0FBRUEsY0FBVSxLQUFWLENBQWdCLFVBQVMsQ0FBVCxFQUFZO0FBQzFCLFFBQUUsY0FBRjs7QUFFQSxVQUFHLE1BQU0sRUFBTixDQUFTLFVBQVQsQ0FBSCxFQUF5QjtBQUN2QixjQUFNLElBQU47QUFFRCxPQUhELE1BR087QUFDTCxjQUFNLE1BQU47QUFFRDs7QUFFRCxhQUFPLElBQVAsRUFBYSxXQUFiLENBQXlCLFdBQXpCO0FBRUQsS0FiRDtBQWVELEdBbkJEOztBQXFCQSxNQUFNLGFBQWEsU0FBYixVQUFhLENBQUMsSUFB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QkFBVSxHQUFWLEVBQWdCO0FBQzFCLGVBQU8sZ0NBQVAsRUFBeUMsV0FBekMsQ0FBcUQsV0FBckQ7QUFDRCxPQUxnQjtBQU1qQixlQUFTLG1CQUFZLENBRXBCO0FBUmdCLEtBQVosRUFTSixPQVRJLEVBQVA7QUFXRCxHQWZEOztBQWlCQSxTQUFPO0FBQ0wsZUFBVyxTQUROO0FBRUwsYUFBUztBQUZKLEdBQVA7QUFLRCxDQTNEVSxFQUFYOztrQkE2RGUsRTs7Ozs7Ozs7QUMvRGYsSUFBTSxRQUFVLFlBQU07O0FBRXBCLE1BQUksZ0JBQWdCLFNBQWhCLGFBQWdCLENBQUMsTUFBRCxFQUFZO0FBQzlCLFdBQU8sT0FBTyxNQUFQLENBQWMsQ0FBZCxFQUFpQixXQUFqQixLQUFpQyxPQUFPLEtBQVAsQ0FBYSxDQUFiLENBQXhDO0FBQ0QsR0FGRDs7QUFJQSxNQUFJLFdBQVcsU0FBWCxRQUFXLENBQUMsRUFBRCxFQUFLLEdBQUwsRUFBYTtBQUMxQixXQUFPLEdBQUcsU0FBSCxJQUFnQixJQUFJLE1BQUosQ0FBVyxZQUFZLEdBQVosR0FBa0IsU0FBN0IsRUFBd0MsSUFBeEMsQ0FBNkMsR0FBRyxTQUFoRCxDQUF2QjtBQUNELEdBRkQ7O0FBSUEsU0FBTztBQUNMLG1CQUFlLGFBRFY7QUFFTCxjQUFVO0FBRkwsR0FBUDtBQUtELENBZmEsRUFBZDs7a0JBaUJlLEs7Ozs7Ozs7O0FDakJmLElBQU0sU0FBVSxZQUFXOztBQUV6QixXQUFTLFlBQVQsR0FBd0I7QUFDdEIsV0FBTyxxQkFBUCxFQUE4QixLQUE5QjtBQUNEOztBQUVELFdBQVMsVUFBVCxHQUFzQjtBQUNwQixXQUFPLHNCQUFQLEVBQStCLE9BQS9CO0FBQ0Q7O0FBRUQsU0FBTztBQUNMLGtCQUFjLFlBRFQ7QUFFTCxnQkFBWTtBQUZQLEdBQVA7QUFNRCxDQWhCYyxFQUFmOztrQkFrQmUsTSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJpbXBvcnQgVmVuZG9yIGZyb20gJy4vdmVuZG9yJztcbmltcG9ydCBQRiBmcm9tICcuL2NvbXBvbmVudC1wZXRmaW5kZXInO1xuaW1wb3J0IG1vYmlsZU1lbnUgZnJvbSAnLi9jb21wb25lbnQtbW9iaWxlLW1lbnUnO1xuXG5qUXVlcnkoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuXG4gIC8vIEluaXRpYWxpemluZyAuLi5cbiAgbW9iaWxlTWVudS5pbml0KCk7XG4gIFZlbmRvci5pbml0Q2Fyb3VzZWwoKTtcbiAgVmVuZG9yLmluaXRGaXR2aWQoKTtcbiAgUEYubG9hZFBldHMoKTtcblxufSk7XG4iLCJpbXBvcnQgU2xpZGVvdXQgZnJvbSAnc2xpZGVvdXQnO1xuXG5jb25zdCBjb21wb25lbnRNb2JpbGVNZW51ID0gKGZ1bmN0aW9uKCkge1xuXG4gIHZhciAkbWVudSA9IGpRdWVyeSgnLm5hdi1tb2JpbGUnKSxcbiAgICAgICRtZW51SWNvbiA9IGpRdWVyeSgnLnRvZ2dsZS1idXR0b24nKSxcbiAgICAgICRtZW51Q29udGFpbmVyID0galF1ZXJ5KCcubWVudS1tb2JpbGUtbmF2aWdhdGlvbi1jb250YWluZXInKSxcbiAgICAgICRzbGlkZW91dFBhbmVsID0galF1ZXJ5KCcuc2xpZGVvdXQtcGFuZWwnKTtcblxuICBjb25zdCBzaG93TW9iaWxlTWVudSA9ICgpID0+IHtcblxuICAgICRtZW51Q29udGFpbmVyLmZhZGVJbignc2xvdycpO1xuXG4gICAgJG1lbnVJY29uLmNsaWNrKGZ1bmN0aW9uKGUpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgaWYoJG1lbnUuaXMoJzp2aXNpYmxlJykpIHtcbiAgICAgICAgJG1lbnUuaGlkZSgpO1xuXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkbWVudS5mYWRlSW4oKTtcblxuICAgICAgfVxuXG4gICAgICBqUXVlcnkodGhpcykudG9nZ2xlQ2xhc3MoXCJpcy1hY3RpdmVcIik7XG5cbiAgICB9KTtcblxuICB9O1xuXG4gIGNvbnN0IHRvZ2dsZU1lbnUgPSAobWVudSkgPT4ge1xuXG4gICAgJG1lbnVJY29uLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgbWVudS50b2dnbGUoKTtcbiAgICB9KTtcblxuICB9O1xuXG4gIGNvbnN0IGluaXQgPSAoKSA9PiB7XG5cbiAgICB2YXIgbWVudSA9IG5ldyBTbGlkZW91dCh7XG4gICAgICAncGFuZWwnOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udGVudCcpLFxuICAgICAgJ21lbnUnOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWVudS1tb2JpbGUnKSxcbiAgICAgICdwYWRkaW5nJzogMjU2LFxuICAgICAgJ3RvbGVyYW5jZSc6IDcwLFxuICAgICAgJ3NpZGUnOiAncmlnaHQnLFxuICAgICAgJ3RvdWNoJzogZmFsc2VcbiAgICB9KTtcblxuICAgIHRvZ2dsZU1lbnUobWVudSk7XG4gICAgc2hvd01vYmlsZU1lbnUoKTtcblxuICB9O1xuXG4gIHJldHVybiB7XG4gICAgaW5pdDogaW5pdFxuICB9O1xuXG59KSgpO1xuXG5leHBvcnQgZGVmYXVsdCBjb21wb25lbnRNb2JpbGVNZW51O1xuIiwiLy8gaW1wb3J0IElzb3RvcGUgZnJvbSAnaXNvdG9wZS1sYXlvdXQnO1xuaW1wb3J0IFBGIGZyb20gJy4vcGV0ZmluZGVyJztcbmltcG9ydCBSeCBmcm9tICdyeCc7XG4vLyBpbXBvcnQgaW1hZ2VzbG9hZGVkIGZyb20gJ2ltYWdlc2xvYWRlZCc7XG5pbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IFV0aWxzIGZyb20gJy4vdXRpbHMnO1xuXG5jb25zdCBjb21wb25lbnRQZXRGaW5kZXIgPSAoKCkgPT4ge1xuXG4gIHZhciAkZ3JpZCA9IGpRdWVyeSgnLmNvbXBvbmVudC1wZXQtZmluZGVyLWdyaWQnKSxcbiAgICAgICRncmlkQ29udGFpbmVyID0galF1ZXJ5KCcuY29tcG9uZW50LXBldC1maW5kZXInKSxcbiAgICAgICRzcGlubmVyID0galF1ZXJ5KCcuY29tcG9uZW50LXBldC1maW5kZXIgLnNwaW5uZXInKSxcbiAgICAgICRpbnB1dFppcGNvZGUgPSBqUXVlcnkoJy5jb21wb25lbnQtcGV0LWZpbmRlci1maWx0ZXItemlwY29kZScpLFxuICAgICAgJGlucHV0VHlwZSA9IGpRdWVyeSgnLmNvbXBvbmVudC1wZXQtZmluZGVyLWZpbHRlci10eXBlJyksXG4gICAgICAkaW5wdXRCcmVlZHMgPSBqUXVlcnkoJy5jb21wb25lbnQtcGV0LWZpbmRlci1maWx0ZXItYnJlZWQnKSxcbiAgICAgICRpbnB1dFNpemUgPSBqUXVlcnkoJy5jb21wb25lbnQtcGV0LWZpbmRlci1maWx0ZXItc2l6ZScpLFxuICAgICAgJGlucHV0QWdlID0galF1ZXJ5KCcuY29tcG9uZW50LXBldC1maW5kZXItZmlsdGVyLWFnZScpLFxuICAgICAgJGJ1dHRvbkNsZWFyID0galF1ZXJ5KCcuY29tcG9uZW50LXBldC1maW5kZXItZmlsdGVyLWNsZWFyJyksXG4gICAgICAkbXNnID0galF1ZXJ5KCcuY29tcG9uZW50LXBldC1maW5kZXIgLm1zZycpLFxuICAgICAgc2VsZWN0ZWRGaWx0ZXJzID0ge1xuICAgICAgICB0eXBlOiBudWxsLFxuICAgICAgICBicmVlZHM6IG51bGwsXG4gICAgICAgIHNpemU6IG51bGwsXG4gICAgICAgIGFnZTogbnVsbFxuICAgICAgfTtcblxuICAvL1xuICAvLyBJc290b3BlIEluaXRpbmdcbiAgLy9cbiAgY29uc3QgbG9hZFBldHMgPSAoKSA9PiB7XG5cbiAgICBpZigkZ3JpZC5sZW5ndGgpIHtcblxuICAgICAgUnguT2JzZXJ2YWJsZS5mcm9tUHJvbWlzZShQRi5nZXRQZXRzKCkpLnN1YnNjcmliZShcblxuICAgICAgICBwZXRzID0+IHtcblxuICAgICAgICAgIGluc2VydFBldHNJbnRvRE9NKHBldHMucGV0ZmluZGVyLnBldHMucGV0KTtcblxuXG5cblxuICAgICAgICAgICRncmlkLmltYWdlc0xvYWRlZCggZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgIGpRdWVyeSgnLmNvbXBvbmVudC1wZXQtZmluZGVyIC5zcGlubmVyJykuYWRkQ2xhc3MoJ2lzLWhpZGRlbicpO1xuXG4gICAgICAgICAgICBpZiAoISRncmlkLmhhc0NsYXNzKCdpcy12aXNpYmxlJykpIHtcbiAgICAgICAgICAgICAgJGdyaWQuYWRkQ2xhc3MoJ2lzLXZpc2libGUnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaW5pdEdyaWQoKTtcblxuICAgICAgICAgIH0pO1xuXG5cblxuICAgICAgICAgIC8vIG5ldyBpbWFnZXNsb2FkZWQoJy5jb21wb25lbnQtcGV0LWZpbmRlci1ncmlkJywgKCkgPT4ge1xuICAgICAgICAgIC8vXG4gICAgICAgICAgLy8gICBqUXVlcnkoJy5jb21wb25lbnQtcGV0LWZpbmRlciAuc3Bpbm5lcicpLmFkZENsYXNzKCdpcy1oaWRkZW4nKTtcbiAgICAgICAgICAvL1xuICAgICAgICAgIC8vICAgY29uc29sZS5sb2coXCJJbWFnZXMgbG9hZGVkIC4uLlwiKTtcbiAgICAgICAgICAvL1xuICAgICAgICAgIC8vICAgaWYgKCEkZ3JpZC5oYXNDbGFzcygnaXMtdmlzaWJsZScpKSB7XG4gICAgICAgICAgLy8gICAgICRncmlkLmFkZENsYXNzKCdpcy12aXNpYmxlJyk7XG4gICAgICAgICAgLy8gICB9XG4gICAgICAgICAgLy9cbiAgICAgICAgICAvLyAgIGluaXRHcmlkKCk7XG4gICAgICAgICAgLy9cbiAgICAgICAgICAvLyB9KTtcblxuXG5cblxuICAgICAgICB9LFxuXG4gICAgICAgIGVycm9yID0+IHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIkVycm9yOiBcIiwgZXJyb3IpO1xuICAgICAgICB9XG5cbiAgICAgICk7XG5cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gY29uc29sZS5sb2coJ05PVCBsb2FkaW5nIHBldHMgLi4uJyk7XG4gICAgfVxuXG4gIH07XG5cblxuICAvL1xuICAvLyBDbGVhciBmaWx0ZXJcbiAgLy9cbiAgY29uc3QgY2xlYXJGaWx0ZXJzID0gaXNvID0+IHtcblxuICAgICRpbnB1dFR5cGUucHJvcCgnc2VsZWN0ZWRJbmRleCcsIDApO1xuICAgICRpbnB1dFNpemUucHJvcCgnc2VsZWN0ZWRJbmRleCcsIDApO1xuICAgICRpbnB1dEFnZS5wcm9wKCdzZWxlY3RlZEluZGV4JywgMCk7XG4gICAgJGlucHV0QnJlZWRzLnZhbCgnJyk7XG5cbiAgICBzZWxlY3RlZEZpbHRlcnMgPSB7XG4gICAgICB0eXBlOiBudWxsLFxuICAgICAgYnJlZWRzOiBudWxsLFxuICAgICAgc2l6ZTogbnVsbCxcbiAgICAgIGFnZTogbnVsbFxuICAgIH07XG5cbiAgICBpc28uaXNvdG9wZSh7XG4gICAgICBmaWx0ZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9KTtcblxuICB9O1xuXG5cbiAgLy9cbiAgLy8gQ29uc3RydWN0IGJyZWVkIGNsYXNzZXNcbiAgLy9cbiAgY29uc3QgY3JlYXRlQnJlZWRzTGlzdCA9IChicmVlZHMpID0+IHtcbiAgICB2YXIgYnJlZWRDbGFzc2VzID0gJyc7XG5cbiAgICBpZihicmVlZHMubGVuZ3RoKSB7XG4gICAgICBqUXVlcnkuZWFjaChicmVlZHMsIChpbmRleCwgYnJlZWQpID0+IHtcbiAgICAgICAgaWYoYnJlZWQuJHQpIHtcbiAgICAgICAgICBicmVlZENsYXNzZXMgPSBicmVlZENsYXNzZXMgKz0gJyAnICsgYnJlZWQuJHQudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGJyZWVkQ2xhc3NlcyA9IGJyZWVkQ2xhc3NlcyArPSAnICcgKyBicmVlZHMuJHQudG9Mb3dlckNhc2UoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gYnJlZWRDbGFzc2VzO1xuXG4gIH07XG5cblxuICAvL1xuICAvLyBDcmVhdGUgUGV0IEltYWdlXG4gIC8vXG4gIGNvbnN0IGNyZWF0ZVBldEltYWdlID0gKHBldCkgPT4ge1xuICAgIHZhciBpbWcgPSAncGhvdG9zJyBpbiBwZXQubWVkaWEgPyBwZXQubWVkaWEucGhvdG9zLnBob3RvWzJdLiR0IDogJy4uLy4uL2NvbnRlbnQvdGhlbWVzL3BldGhhdmVuL2Fzc2V0cy9pbWdzL3BldC1pbWctbm90Zm91bmQuanBnJztcblxuICAgIHJldHVybiBpbWc7XG4gIH07XG5cblxuICAvL1xuICAvLyBJbnNlcnQgUGV0cyBJbnRvIEdyaWRcbiAgLy9cbiAgY29uc3QgaW5zZXJ0UGV0c0ludG9ET00gPSBwZXRzID0+IHtcblxuICAgIGpRdWVyeS5lYWNoKHBldHMsIChrZXksIHBldCkgPT4ge1xuXG4gICAgICB2YXIgYnJlZWRzID0gcGV0LmJyZWVkcy5icmVlZCxcbiAgICAgICAgICBicmVlZENsYXNzZXMgPSBjcmVhdGVCcmVlZHNMaXN0KGJyZWVkcyksXG4gICAgICAgICAgcGV0SW1hZ2UgPSBjcmVhdGVQZXRJbWFnZShwZXQpO1xuXG4gICAgICAkZ3JpZC5hcHBlbmQoalF1ZXJ5KFwiPGEgaHJlZj0naHR0cHM6Ly93d3cucGV0ZmluZGVyLmNvbS9wZXRkZXRhaWwvXCIgKyBwZXQuaWQuJHQgKyBcIicgY2xhc3M9J2dyaWQtaXRlbSBwZXQtbGluayBcIiArIGJyZWVkQ2xhc3NlcyArIFwiJyBkYXRhLXR5cGU9J1wiICsgcGV0LmFuaW1hbC4kdCArIFwiJyBkYXRhLWJyZWVkcz0nXCIgKyBicmVlZENsYXNzZXMgKyBcIicgZGF0YS1zaXplPSdcIiArIHBldC5zaXplLiR0ICsgXCInIGRhdGEtYWdlPSdcIiArIHBldC5hZ2UuJHQgKyBcIicgdGFyZ2V0PSdfYmxhbmsnPjxpbWcgc3JjPVwiICsgcGV0SW1hZ2UgKyBcIiBjbGFzcz0ncGV0LWltYWdlJz48aDQgY2xhc3M9J3BldC1uYW1lJz5cIiArIHBldC5uYW1lLiR0ICsgXCI8L2g0PjxwIGNsYXNzPSdwZXQtYnJlZWQnPjxzdHJvbmc+QnJlZWRzPC9zdHJvbmc+XCIgKyBicmVlZENsYXNzZXMgKyBcIjwvcD48cCBjbGFzcz0ncGV0LWFnZSc+PHN0cm9uZz5BZ2U6PC9zdHJvbmc+IFwiICsgcGV0LmFnZS4kdCArIFwiPC9wPjxwIGNsYXNzPSdwZXQtc2l6ZSc+PHN0cm9uZz5TaXplOjwvc3Ryb25nPiBcIiArIHBldC5zaXplLiR0ICsgXCI8L3A+PC9hPlwiKSk7XG5cbiAgICB9KTtcbiAgfTtcblxuXG4gIC8vXG4gIC8vIFNldCBBbmltYWwgVHlwZVxuICAvL1xuICBjb25zdCBzZXRUeXBlID0gKCkgPT4ge1xuXG4gICAgaWYgKCRpbnB1dFR5cGUudmFsKCkubGVuZ3RoID09PSAwKSB7XG4gICAgICBzZWxlY3RlZEZpbHRlcnMudHlwZSA9IG51bGw7XG5cbiAgICB9IGVsc2Uge1xuICAgICAgc2VsZWN0ZWRGaWx0ZXJzLnR5cGUgPSAkaW5wdXRUeXBlLnZhbCgpO1xuXG4gICAgfVxuICB9O1xuXG5cbiAgLy9cbiAgLy8gSXNvdG9wZSBJbml0aW5nXG4gIC8vXG4gIGNvbnN0IGluaXRHcmlkID0gKCkgPT4ge1xuXG4gICAgaWYgKGpRdWVyeSgnLmNvbXBvbmVudC1wZXQtZmluZGVyLWdyaWQnKS5sZW5ndGgpIHtcblxuICAgICAgY29uc3QgaXNvID0galF1ZXJ5KCcuY29tcG9uZW50LXBldC1maW5kZXItZ3JpZCcpLmlzb3RvcGUoe1xuICAgICAgICBpdGVtU2VsZWN0b3I6ICcuZ3JpZC1pdGVtJyxcbiAgICAgICAgcGVyY2VudFBvc2l0aW9uOiB0cnVlLFxuICAgICAgICBtYXNvbnJ5OiB7XG4gICAgICAgICAgY29sdW1uV2lkdGg6ICcuZ3JpZC1pdGVtJyxcbiAgICAgICAgICBndXR0ZXI6IDJcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHNldFR5cGUoKTtcbiAgICAgIGRldGVjdEZpbHRlckV2ZW50cyhpc28pO1xuICAgICAgZmlsdGVyU2VsZWN0aW9uKGlzbyk7XG5cbiAgICB9XG5cbiAgfTtcblxuXG5cblxuXG5cblxuICBmdW5jdGlvbiBjb25zdHJ1Y3RGaWx0ZXJDbGFzcyhzZWxlY3RlZE9wdGlvbnMpIHtcblxuICAgIHZhciByZXN1bHQgPSAnJztcblxuICAgIGZvciAodmFyIG9wdGlvbiBpbiBzZWxlY3RlZE9wdGlvbnMpIHtcblxuICAgICAgaWYgKHNlbGVjdGVkT3B0aW9ucy5oYXNPd25Qcm9wZXJ0eShvcHRpb24pKSB7XG5cbiAgICAgICAgaWYgKG9wdGlvbiA9PT0gJ2JyZWVkcycpIHtcbiAgICAgICAgICByZXN1bHQgKz0gJy5ncmlkLWl0ZW1bZGF0YS0nICsgb3B0aW9uICsgJyo9XCInICsgc2VsZWN0ZWRPcHRpb25zW29wdGlvbl0gKyAnXCJdJztcblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc3VsdCArPSAnLmdyaWQtaXRlbVtkYXRhLScgKyBvcHRpb24gKyAnPVwiJyArIHNlbGVjdGVkT3B0aW9uc1tvcHRpb25dICsgJ1wiXSc7XG4gICAgICAgIH1cblxuICAgICAgfVxuXG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcblxuICB9XG5cblxuXG5cblxuXG5cblxuXG4gIGZ1bmN0aW9uIGNvbnN0cnVjdFNlbGVjdGVkT3B0aW9ucygkaXRlbXMpIHtcblxuICAgIHZhciBmaW5hbFNlbGVjdGVkT3B0aW9ucztcblxuICAgICRpdGVtcy5mb3JFYWNoKCBmdW5jdGlvbihpdGVtRWxlbSkge1xuXG4gICAgICB2YXIgJGl0ZW1FbGVtID0galF1ZXJ5KGl0ZW1FbGVtKVswXTtcblxuICAgICAgdmFyIGVsZW1lbnQgPSB7XG4gICAgICAgIHR5cGU6ICRpdGVtRWxlbS5kYXRhc2V0LnR5cGUsXG4gICAgICAgIGJyZWVkczogJGl0ZW1FbGVtLmRhdGFzZXQuYnJlZWRzLFxuICAgICAgICBzaXplOiAkaXRlbUVsZW0uZGF0YXNldC5zaXplLFxuICAgICAgICBhZ2U6ICRpdGVtRWxlbS5kYXRhc2V0LmFnZVxuICAgICAgfTtcblxuICAgICAgLy8gUmVtb3ZlIHRoZSBudWxsIHZhbHVlcyAuLi5cbiAgICAgIHZhciBzZWxlY3RlZCA9IF8ub21pdEJ5KHNlbGVjdGVkRmlsdGVycywgXy5pc051bGwpO1xuXG4gICAgICBpZiAoc2VsZWN0ZWQuYnJlZWRzKSB7XG5cblxuXG4gICAgICAgIGlmIChzZWxlY3RlZC5icmVlZHMubGVuZ3RoID4gMykge1xuXG4gICAgICAgICAgY29uc29sZS5sb2coXCJHcmVhdGVyIHRoYW4gMyEgXCIsIHNlbGVjdGVkLmJyZWVkcyk7XG5cbiAgICAgICAgICAvLyB2YXIgZWxlbWVudFdpdGhvdXRCcmVlZHMgPSB7XG4gICAgICAgICAgLy8gICB0eXBlOiBlbGVtZW50LnR5cGUsXG4gICAgICAgICAgLy8gICBhZ2U6IGVsZW1lbnQuYWdlLFxuICAgICAgICAgIC8vICAgc2l6ZTogZWxlbWVudC5zaXplXG4gICAgICAgICAgLy8gfTtcblxuICAgICAgICAgIHZhciBzZWxlY3RlZFdpdGhvdXRCcmVlZHMgPSB7XG4gICAgICAgICAgICB0eXBlOiBzZWxlY3RlZEZpbHRlcnMudHlwZSxcbiAgICAgICAgICAgIGFnZTogc2VsZWN0ZWRGaWx0ZXJzLmFnZSxcbiAgICAgICAgICAgIHNpemU6IHNlbGVjdGVkRmlsdGVycy5zaXplLFxuICAgICAgICAgICAgYnJlZWRzOiBzZWxlY3RlZC5icmVlZHNcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgY29uc29sZS5sb2coXCJ6enp6enp6OiBcIiwgc2VsZWN0ZWRXaXRob3V0QnJlZWRzKTtcblxuICAgICAgICAgIGZpbmFsU2VsZWN0ZWRPcHRpb25zID0gXy5vbWl0Qnkoc2VsZWN0ZWRXaXRob3V0QnJlZWRzLCBfLmlzTnVsbCk7XG5cbiAgICAgICAgICBjb25zb2xlLmxvZyhcImZpbmFsU2VsZWN0ZWRPcHRpb25zOiBcIiwgZmluYWxTZWxlY3RlZE9wdGlvbnMpO1xuXG5cbiAgICAgICAgfVxuXG5cblxuICAgICAgfSBlbHNlIHtcblxuICAgICAgICBmaW5hbFNlbGVjdGVkT3B0aW9ucyA9IHNlbGVjdGVkO1xuXG4gICAgICB9XG5cblxuICAgIH0pO1xuXG4gICAgY29uc29sZS5sb2coXCJmaW5hbFNlbGVjdGVkT3B0aW9uczogXCIsIGZpbmFsU2VsZWN0ZWRPcHRpb25zKTtcblxuICAgIHJldHVybiBmaW5hbFNlbGVjdGVkT3B0aW9ucztcblxuICB9XG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG4gIC8vXG4gIC8vIEZpbHRlciBTZWxlY3Rpb25cbiAgLy9cbiAgY29uc3QgZmlsdGVyU2VsZWN0aW9uID0gaXNvID0+IHtcblxuICAgIGlzby5pc290b3BlKHtcbiAgICAgIGl0ZW1TZWxlY3RvcjogJy5ncmlkLWl0ZW0nLFxuICAgICAgcGVyY2VudFBvc2l0aW9uOiB0cnVlLFxuICAgICAgbWFzb25yeToge1xuICAgICAgICBjb2x1bW5XaWR0aDogJy5ncmlkLWl0ZW0nLFxuICAgICAgICBndXR0ZXI6IDJcbiAgICAgIH0sXG4gICAgICBmaWx0ZXI6IGNvbnN0cnVjdEZpbHRlckNsYXNzKCBjb25zdHJ1Y3RTZWxlY3RlZE9wdGlvbnMoIGlzby5pc290b3BlKCdnZXRJdGVtRWxlbWVudHMnKSApIClcblxuICAgIH0pO1xuXG4gIH07XG5cblxuICAvL1xuICAvLyBPbiBmaWx0ZXIgY2xlYXJpbmdcbiAgLy9cbiAgY29uc3Qgb25DbGVhciA9IGlzbyA9PiB7XG5cbiAgICAkYnV0dG9uQ2xlYXIuY2xpY2soICgpID0+IHtcblxuICAgICAgY2xlYXJGaWx0ZXJzKGlzbyk7XG5cbiAgICB9KTtcblxuICB9O1xuXG5cbiAgLy9cbiAgLy8gT24gVHlwZSBjaGFuZ2VcbiAgLy9cbiAgY29uc3Qgb25UeXBlID0gaXNvID0+IHtcblxuICAgICRpbnB1dFR5cGUuY2hhbmdlKCAoKSA9PiB7XG5cbiAgICAgIHNldFR5cGUoKTtcbiAgICAgIGZpbHRlclNlbGVjdGlvbihpc28pO1xuXG4gICAgfSk7XG5cbiAgfTtcblxuXG4gIC8vXG4gIC8vIE9uIEJyZWVkIGNoYW5nZVxuICAvL1xuICBjb25zdCBvbkJyZWVkID0gaXNvID0+IHtcblxuICAgICRpbnB1dEJyZWVkcy5rZXl1cCggKCkgPT4ge1xuXG4gICAgICBpZiAoJGlucHV0QnJlZWRzLnZhbCgpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBzZWxlY3RlZEZpbHRlcnMuYnJlZWRzID0gbnVsbDtcblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2VsZWN0ZWRGaWx0ZXJzLmJyZWVkcyA9ICRpbnB1dEJyZWVkcy52YWwoKS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICB9XG5cbiAgICAgIGZpbHRlclNlbGVjdGlvbihpc28pO1xuXG4gICAgfSk7XG5cbiAgfTtcblxuXG4gIC8vXG4gIC8vIE9uIFNpemUgY2hhbmdlXG4gIC8vXG4gIGNvbnN0IG9uU2l6ZSA9IGlzbyA9PiB7XG5cbiAgICAkaW5wdXRTaXplLmNoYW5nZSggKCkgPT4ge1xuICAgICAgc2VsZWN0ZWRGaWx0ZXJzLnNpemUgPSAkaW5wdXRTaXplLnZhbCgpO1xuICAgICAgZmlsdGVyU2VsZWN0aW9uKGlzbyk7XG4gICAgfSk7XG5cbiAgfTtcblxuXG4gIC8vXG4gIC8vIE9uIEFnZSBjaGFuZ2VcbiAgLy9cbiAgY29uc3Qgb25BZ2UgPSBpc28gPT4ge1xuXG4gICAgJGlucHV0QWdlLmNoYW5nZSggKCkgPT4ge1xuICAgICAgc2VsZWN0ZWRGaWx0ZXJzLmFnZSA9ICRpbnB1dEFnZS52YWwoKTtcbiAgICAgIGZpbHRlclNlbGVjdGlvbihpc28pO1xuICAgIH0pO1xuXG4gIH07XG5cblxuICAvL1xuICAvLyBPbiBGaW5pc2hcbiAgLy9cbiAgY29uc3Qgb25GaW5pc2ggPSBpc28gPT4ge1xuXG4gICAgaXNvLm9uKCdhcnJhbmdlQ29tcGxldGUnLCBmdW5jdGlvbihldmVudCwgZmlsdGVyZWRJdGVtcykge1xuICAgICAgY29uc29sZS5sb2coXCJmaWx0ZXJlZEl0ZW1zOiBcIiwgZmlsdGVyZWRJdGVtcyk7XG4gICAgICBjaGVja0ZvckVtcHR5UmVzdWx0cyhmaWx0ZXJlZEl0ZW1zKTtcbiAgICB9KTtcblxuICB9O1xuXG5cbiAgLy9cbiAgLy8gRGV0ZWN0IEZpbHRlciBFdmVudHNcbiAgLy9cbiAgY29uc3QgZGV0ZWN0RmlsdGVyRXZlbnRzID0gaXNvID0+IHtcblxuICAgIG9uVHlwZShpc28pO1xuICAgIG9uQnJlZWQoaXNvKTtcbiAgICBvblNpemUoaXNvKTtcbiAgICBvbkFnZShpc28pO1xuICAgIG9uQ2xlYXIoaXNvKTtcbiAgICBvbkZpbmlzaChpc28pO1xuXG4gIH07XG5cblxuICAvL1xuICAvLyBDaGVjayBmb3IgZW1wdHkgcmVzdWx0c1xuICAvL1xuICBjb25zdCBjaGVja0ZvckVtcHR5UmVzdWx0cyA9IGZpbHRlcmVkSXRlbXMgPT4ge1xuXG4gICAgY29uc29sZS5sb2coXCJsZW5ndGg6IFwiLCBmaWx0ZXJlZEl0ZW1zLmxlbmd0aCk7XG5cbiAgICBpZiAoZmlsdGVyZWRJdGVtcy5sZW5ndGggPT09IDApIHtcblxuICAgICAgJGdyaWRDb250YWluZXIuYWRkQ2xhc3MoJ2lzLWVtcHR5Jyk7XG5cbiAgICB9IGVsc2Uge1xuXG4gICAgICBpZiAoJGdyaWRDb250YWluZXIuaGFzQ2xhc3MoJ2lzLWVtcHR5JykpIHtcbiAgICAgICAgJGdyaWRDb250YWluZXIucmVtb3ZlQ2xhc3MoJ2lzLWVtcHR5Jyk7XG4gICAgICB9XG5cbiAgICB9XG5cbiAgfTtcblxuXG4gIHJldHVybiB7XG4gICAgbG9hZFBldHM6IGxvYWRQZXRzXG4gIH07XG5cbn0pKCk7XG5cbmV4cG9ydCBkZWZhdWx0IGNvbXBvbmVudFBldEZpbmRlcjtcbiIsImltcG9ydCBSeCBmcm9tICdyeCc7XG5cbmNvbnN0IFBGID0gKGZ1bmN0aW9uKCkge1xuXG4gIGxldCBlbmRwb2ludCA9ICdodHRwczovL2FwaS5wZXRmaW5kZXIuY29tJztcbiAgbGV0IG1ldGhvZEJyZWVkTGlzdCA9ICcvYnJlZWQubGlzdCc7XG4gIGxldCBtZXRob2RGaW5kUGV0cyA9ICcvc2hlbHRlci5nZXRQZXRzJztcbiAgbGV0IHNoZWx0ZXJJRCA9ICdNTjM2JztcbiAgbGV0IEFQSWtleSA9ICc0NTRiNzJkNWI5ZmM4ZmNhNzJjN2E0NjFhNWFjNDZkMic7XG4gIGxldCBmb3JtYXQgPSAnanNvbic7XG5cbiAgbGV0ICRjb250YWluZXIgPSBqUXVlcnkoJy5jb21wb25lbnQtcGV0LWZpbmRlcicpO1xuXG5cbiAgLy9cbiAgLy8gR2V0IEJyZWVkc1xuICAvL1xuICBjb25zdCBnZXRCcmVlZHMgPSBmdW5jdGlvbigpIHtcblxuICAgIHZhciBhbmltYWxUeXBlID0gJGNvbnRhaW5lci5kYXRhKFwiYW5pbWFsLXR5cGVcIiksXG4gICAgICAgIHVybCA9IGVuZHBvaW50ICsgbWV0aG9kQnJlZWRMaXN0ICsgJz9rZXk9JyArIEFQSWtleSArICcmYW5pbWFsPScgKyBhbmltYWxUeXBlICsgJyZmb3JtYXQ9JyArIGZvcm1hdCArICcmY2FsbGJhY2s9Pyc7XG5cbiAgICByZXR1cm4galF1ZXJ5LmFqYXgoe1xuICAgICAgdXJsOiB1cmwsXG4gICAgICBkYXRhVHlwZTogJ2pzb25wJyxcbiAgICAgIGJlZm9yZVNlbmQ6IGZ1bmN0aW9uKHhocikge1xuICAgICAgICAvLyBqUXVlcnkoJy5jb21wb25lbnQtcGV0LWZpbmRlciAuc3Bpbm5lcicpLnJlbW92ZUNsYXNzKCdpcy1oaWRkZW4nKTtcbiAgICAgIH0sXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIGpRdWVyeSgnLmNvbXBvbmVudC1wZXQtZmluZGVyIC5zcGlubmVyJykuYWRkQ2xhc3MoJ2lzLWhpZGRlbicpO1xuICAgICAgfVxuICAgIH0pLnByb21pc2UoKTtcblxuICB9O1xuXG5cbiAgLy9cbiAgLy8gR2VuZXJpYyBzZWFyY2hcbiAgLy9cbiAgY29uc3QgZ2V0UGV0cyA9IGZ1bmN0aW9uKCkge1xuXG4gICAgdmFyIHVybCA9IGVuZHBvaW50ICsgbWV0aG9kRmluZFBldHMgKyAnP2tleT0nICsgQVBJa2V5ICsgJyZpZD0nICsgc2hlbHRlcklEICsgJyZjb3VudD0xMDAwJyArICcmZm9ybWF0PScgKyBmb3JtYXQgKyAnJmNhbGxiYWNrPT8nO1xuXG4gICAgcmV0dXJuIGpRdWVyeS5hamF4KHtcbiAgICAgIHVybDogdXJsLFxuICAgICAgZGF0YVR5cGU6ICdqc29ucCcsXG4gICAgICBiZWZvcmVTZW5kOiBmdW5jdGlvbiggeGhyICkge1xuICAgICAgICBqUXVlcnkoJy5jb21wb25lbnQtcGV0LWZpbmRlciAuc3Bpbm5lcicpLnJlbW92ZUNsYXNzKCdpcy1oaWRkZW4nKTtcbiAgICAgIH0sXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIFxuICAgICAgfVxuICAgIH0pLnByb21pc2UoKTtcblxuICB9O1xuXG4gIHJldHVybiB7XG4gICAgZ2V0QnJlZWRzOiBnZXRCcmVlZHMsXG4gICAgZ2V0UGV0czogZ2V0UGV0c1xuICB9O1xuXG59KSgpO1xuXG5leHBvcnQgZGVmYXVsdCBQRjtcbiIsImNvbnN0IFV0aWxzID0gKCAoKSA9PiB7XG5cbiAgdmFyIHRvSW5pdGlhbENhc2UgPSAoc3RyaW5nKSA9PiB7XG4gICAgcmV0dXJuIHN0cmluZy5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHN0cmluZy5zbGljZSgxKTtcbiAgfTtcblxuICB2YXIgaGFzQ2xhc3MgPSAoZWwsIGNscykgPT4ge1xuICAgIHJldHVybiBlbC5jbGFzc05hbWUgJiYgbmV3IFJlZ0V4cChcIihcXFxcc3xeKVwiICsgY2xzICsgXCIoXFxcXHN8JClcIikudGVzdChlbC5jbGFzc05hbWUpO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgdG9Jbml0aWFsQ2FzZTogdG9Jbml0aWFsQ2FzZSxcbiAgICBoYXNDbGFzczogaGFzQ2xhc3NcbiAgfTtcblxufSkoKTtcblxuZXhwb3J0IGRlZmF1bHQgVXRpbHM7XG4iLCJjb25zdCBWZW5kb3IgPSAoZnVuY3Rpb24oKSB7XG5cbiAgZnVuY3Rpb24gaW5pdENhcm91c2VsKCkge1xuICAgIGpRdWVyeSgnLmNvbXBvbmVudC1tYXJxdWVlcycpLnNsaWNrKCk7XG4gIH1cblxuICBmdW5jdGlvbiBpbml0Rml0dmlkKCkge1xuICAgIGpRdWVyeShcIi5jb21wb25lbnQsIC5jb250ZW50XCIpLmZpdFZpZHMoKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgaW5pdENhcm91c2VsOiBpbml0Q2Fyb3VzZWwsXG4gICAgaW5pdEZpdHZpZDogaW5pdEZpdHZpZFxuICB9O1xuXG5cbn0pKCk7XG5cbmV4cG9ydCBkZWZhdWx0IFZlbmRvcjtcbiJdfQ==\n"]}