{"version":3,"sources":["app.min.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","_interopRequireDefault","obj","__esModule","default","_vendor2","_componentPetfinder2","_componentMobileMenu2","jQuery","document","ready","init","initCarousel","initFitvid","loadPets","./component-mobile-menu","./component-petfinder","./vendor","2","Object","defineProperty","value","_slideout2","componentMobileMenu","$menu","$menuIcon","$menuContainer","menu","click","toggle","toggleMenu","panel","getElementById","padding","tolerance","side","touch","fadeIn","preventDefault","is","hide","this","toggleClass","slideout","3","_petfinder2","_rx2","_lodash2","componentPetFinder","$grid","$gridContainer","$inputType","$inputBreeds","$inputSize","$inputAge","$buttonClear","selectedFilters","type","breeds","size","age","insertPetsIntoDOM","pets","each","key","pet","breedClasses","index","breed","$t","toLowerCase","createBreedsList","petImage","media","photos","photo","createPetImage","append","id","animal","name","setType","val","initGrid","iso","isotope","itemSelector","percentPosition","masonry","columnWidth","gutter","detectFilterEvents","filterSelection","filter","selectedOptions","result","option","hasOwnProperty","constructFilterClass","$items","finalSelectedOptions","forEach","itemElem","$itemElem","selected","dataset","omitBy","isNull","selectedWithoutBreeds","constructSelectedOptions","change","onType","keyup","onBreed","onSize","onAge","prop","clearFilters","onClear","filteredItems","checkForEmptyResults","onFinish","addClass","hasClass","removeClass","Observable","fromPromise","getPets","subscribe","console","log","petfinder","imagesLoaded","error","./petfinder","./utils","lodash","rx","4","PF","endpoint","APIkey","$container","getBreeds","animalType","data","url","ajax","dataType","beforeSend","xhr","success","promise","5","Utils","toInitialCase","string","charAt","toUpperCase","slice","el","cls","className","RegExp","test","6","Vendor","slick","fitVids"],"mappings":"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","file":"../../app.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nvar _vendor = require('./vendor');\n\nvar _vendor2 = _interopRequireDefault(_vendor);\n\nvar _componentPetfinder = require('./component-petfinder');\n\nvar _componentPetfinder2 = _interopRequireDefault(_componentPetfinder);\n\nvar _componentMobileMenu = require('./component-mobile-menu');\n\nvar _componentMobileMenu2 = _interopRequireDefault(_componentMobileMenu);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\njQuery(document).ready(function () {\n\n  // Initializing ...\n  _componentMobileMenu2.default.init();\n  _vendor2.default.initCarousel();\n  _vendor2.default.initFitvid();\n  _componentPetfinder2.default.loadPets();\n});\n\n},{\"./component-mobile-menu\":2,\"./component-petfinder\":3,\"./vendor\":6}],2:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slideout = require('slideout');\n\nvar _slideout2 = _interopRequireDefault(_slideout);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar componentMobileMenu = function () {\n\n  var $menu = jQuery('.nav-mobile'),\n      $menuIcon = jQuery('.toggle-button'),\n      $menuContainer = jQuery('.menu-mobile-navigation-container'),\n      $slideoutPanel = jQuery('.slideout-panel');\n\n  var showMobileMenu = function showMobileMenu() {\n\n    $menuContainer.fadeIn('slow');\n\n    $menuIcon.click(function (e) {\n      e.preventDefault();\n\n      if ($menu.is(':visible')) {\n        $menu.hide();\n      } else {\n        $menu.fadeIn();\n      }\n\n      jQuery(this).toggleClass(\"is-active\");\n    });\n  };\n\n  var toggleMenu = function toggleMenu(menu) {\n\n    $menuIcon.click(function () {\n      menu.toggle();\n    });\n  };\n\n  var init = function init() {\n\n    var menu = new _slideout2.default({\n      'panel': document.getElementById('content'),\n      'menu': document.getElementById('menu-mobile'),\n      'padding': 256,\n      'tolerance': 70,\n      'side': 'right',\n      'touch': false\n    });\n\n    toggleMenu(menu);\n    showMobileMenu();\n  };\n\n  return {\n    init: init\n  };\n}();\n\nexports.default = componentMobileMenu;\n\n},{\"slideout\":\"slideout\"}],3:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _petfinder = require('./petfinder');\n\nvar _petfinder2 = _interopRequireDefault(_petfinder);\n\nvar _rx = require('rx');\n\nvar _rx2 = _interopRequireDefault(_rx);\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _utils = require('./utils');\n\nvar _utils2 = _interopRequireDefault(_utils);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// import imagesloaded from 'imagesloaded';\n// import Isotope from 'isotope-layout';\nvar componentPetFinder = function () {\n\n  var $grid = jQuery('.component-pet-finder-grid'),\n      $gridContainer = jQuery('.component-pet-finder'),\n      $spinner = jQuery('.component-pet-finder .spinner'),\n      $inputZipcode = jQuery('.component-pet-finder-filter-zipcode'),\n      $inputType = jQuery('.component-pet-finder-filter-type'),\n      $inputBreeds = jQuery('.component-pet-finder-filter-breed'),\n      $inputSize = jQuery('.component-pet-finder-filter-size'),\n      $inputAge = jQuery('.component-pet-finder-filter-age'),\n      $buttonClear = jQuery('.component-pet-finder-filter-clear'),\n      $msg = jQuery('.component-pet-finder .msg'),\n      selectedFilters = {\n    type: null,\n    breeds: null,\n    size: null,\n    age: null\n  };\n\n  //\n  // Isotope Initing\n  //\n  var loadPets = function loadPets() {\n\n    if ($grid.length) {\n\n      _rx2.default.Observable.fromPromise(_petfinder2.default.getPets()).subscribe(function (pets) {\n\n        console.log(\"pets.petfinder.pets: \", pets);\n\n        insertPetsIntoDOM(pets.petfinder.pets.pet);\n\n        $grid.imagesLoaded(function () {\n\n          jQuery('.component-pet-finder .spinner').addClass('is-hidden');\n\n          if (!$grid.hasClass('is-visible')) {\n            $grid.addClass('is-visible');\n          }\n\n          initGrid();\n        });\n      }, function (error) {\n        console.error(\"Error: \", error);\n      });\n    } else {\n      // console.log('NOT loading pets ...');\n    }\n  };\n\n  //\n  // Clear filter\n  //\n  var clearFilters = function clearFilters(iso) {\n\n    $inputType.prop('selectedIndex', 0);\n    $inputSize.prop('selectedIndex', 0);\n    $inputAge.prop('selectedIndex', 0);\n    $inputBreeds.val('');\n\n    selectedFilters = {\n      type: null,\n      breeds: null,\n      size: null,\n      age: null\n    };\n\n    iso.isotope({\n      filter: function filter() {\n        return true;\n      }\n    });\n  };\n\n  //\n  // Construct breed classes\n  //\n  var createBreedsList = function createBreedsList(breeds) {\n    var breedClasses = '';\n\n    if (breeds.length) {\n      jQuery.each(breeds, function (index, breed) {\n        if (breed.$t) {\n          breedClasses = breedClasses += ' ' + breed.$t.toLowerCase();\n        }\n      });\n    } else {\n      breedClasses = breedClasses += ' ' + breeds.$t.toLowerCase();\n    }\n\n    return breedClasses;\n  };\n\n  //\n  // Create Pet Image\n  //\n  var createPetImage = function createPetImage(pet) {\n    var img = 'photos' in pet.media ? pet.media.photos.photo[2].$t : '../../content/themes/pethaven/assets/imgs/pet-img-notfound.jpg';\n\n    return img;\n  };\n\n  //\n  // Insert Pets Into Grid\n  //\n  var insertPetsIntoDOM = function insertPetsIntoDOM(pets) {\n\n    jQuery.each(pets, function (key, pet) {\n\n      var breeds = pet.breeds.breed,\n          breedClasses = createBreedsList(breeds),\n          petImage = createPetImage(pet);\n\n      $grid.append(jQuery(\"<a href='https://www.petfinder.com/petdetail/\" + pet.id.$t + \"' class='grid-item pet-link \" + breedClasses + \"' data-type='\" + pet.animal.$t + \"' data-breeds='\" + breedClasses + \"' data-size='\" + pet.size.$t + \"' data-age='\" + pet.age.$t + \"' target='_blank'><img src=\" + petImage + \" class='pet-image'><h4 class='pet-name'>\" + pet.name.$t + \"</h4><p class='pet-breed'><strong>Breeds</strong>\" + breedClasses + \"</p><p class='pet-age'><strong>Age:</strong> \" + pet.age.$t + \"</p><p class='pet-size'><strong>Size:</strong> \" + pet.size.$t + \"</p></a>\"));\n    });\n  };\n\n  //\n  // Set Animal Type\n  //\n  var setType = function setType() {\n\n    if ($inputType.val().length === 0) {\n      selectedFilters.type = null;\n    } else {\n      selectedFilters.type = $inputType.val();\n    }\n  };\n\n  //\n  // Isotope Initing\n  //\n  var initGrid = function initGrid() {\n\n    if (jQuery('.component-pet-finder-grid').length) {\n\n      var iso = jQuery('.component-pet-finder-grid').isotope({\n        itemSelector: '.grid-item',\n        percentPosition: true,\n        masonry: {\n          columnWidth: '.grid-item',\n          gutter: 2\n        }\n      });\n\n      setType();\n      detectFilterEvents(iso);\n      filterSelection(iso);\n    }\n  };\n\n  function constructFilterClass(selectedOptions) {\n\n    var result = '';\n\n    for (var option in selectedOptions) {\n\n      if (selectedOptions.hasOwnProperty(option)) {\n\n        if (option === 'breeds') {\n          result += '.grid-item[data-' + option + '*=\"' + selectedOptions[option] + '\"]';\n        } else {\n          result += '.grid-item[data-' + option + '=\"' + selectedOptions[option] + '\"]';\n        }\n      }\n    }\n\n    return result;\n  }\n\n  function constructSelectedOptions($items) {\n\n    var finalSelectedOptions;\n\n    $items.forEach(function (itemElem) {\n\n      var $itemElem = jQuery(itemElem)[0];\n\n      var element = {\n        type: $itemElem.dataset.type,\n        breeds: $itemElem.dataset.breeds,\n        size: $itemElem.dataset.size,\n        age: $itemElem.dataset.age\n      };\n\n      // Remove the null values ...\n      var selected = _lodash2.default.omitBy(selectedFilters, _lodash2.default.isNull);\n\n      if (selected.breeds) {\n\n        if (selected.breeds.length > 3) {\n\n          var selectedWithoutBreeds = {\n            type: selectedFilters.type,\n            age: selectedFilters.age,\n            size: selectedFilters.size,\n            breeds: selected.breeds\n          };\n\n          finalSelectedOptions = _lodash2.default.omitBy(selectedWithoutBreeds, _lodash2.default.isNull);\n        }\n      } else {\n\n        finalSelectedOptions = selected;\n      }\n    });\n\n    return finalSelectedOptions;\n  }\n\n  //\n  // Filter Selection\n  //\n  var filterSelection = function filterSelection(iso) {\n\n    iso.isotope({\n      itemSelector: '.grid-item',\n      percentPosition: true,\n      masonry: {\n        columnWidth: '.grid-item',\n        gutter: 2\n      },\n      filter: constructFilterClass(constructSelectedOptions(iso.isotope('getItemElements')))\n\n    });\n  };\n\n  //\n  // On filter clearing\n  //\n  var onClear = function onClear(iso) {\n\n    $buttonClear.click(function () {\n\n      clearFilters(iso);\n    });\n  };\n\n  //\n  // On Type change\n  //\n  var onType = function onType(iso) {\n\n    $inputType.change(function () {\n\n      setType();\n      filterSelection(iso);\n    });\n  };\n\n  //\n  // On Breed change\n  //\n  var onBreed = function onBreed(iso) {\n\n    $inputBreeds.keyup(function () {\n\n      if ($inputBreeds.val().length === 0) {\n        selectedFilters.breeds = null;\n      } else {\n        selectedFilters.breeds = $inputBreeds.val().toLowerCase();\n      }\n\n      filterSelection(iso);\n    });\n  };\n\n  //\n  // On Size change\n  //\n  var onSize = function onSize(iso) {\n\n    $inputSize.change(function () {\n      selectedFilters.size = $inputSize.val();\n      filterSelection(iso);\n    });\n  };\n\n  //\n  // On Age change\n  //\n  var onAge = function onAge(iso) {\n\n    $inputAge.change(function () {\n      selectedFilters.age = $inputAge.val();\n      filterSelection(iso);\n    });\n  };\n\n  //\n  // On Finish\n  //\n  var onFinish = function onFinish(iso) {\n\n    iso.isotope('on', 'arrangeComplete', function (filteredItems) {\n      checkForEmptyResults(filteredItems);\n    });\n\n    // manually trigger initial layout\n    // iso.isotope();\n\n\n    // iso.on('arrangeComplete', function(event, filteredItems) {\n    //   checkForEmptyResults(filteredItems);\n    // });\n  };\n\n  //\n  // Detect Filter Events\n  //\n  var detectFilterEvents = function detectFilterEvents(iso) {\n\n    onType(iso);\n    onBreed(iso);\n    onSize(iso);\n    onAge(iso);\n    onClear(iso);\n    onFinish(iso);\n  };\n\n  //\n  // Check for empty results\n  //\n  var checkForEmptyResults = function checkForEmptyResults(filteredItems) {\n\n    if (filteredItems.length === 0) {\n\n      $gridContainer.addClass('is-empty');\n    } else {\n\n      if ($gridContainer.hasClass('is-empty')) {\n        $gridContainer.removeClass('is-empty');\n      }\n    }\n  };\n\n  return {\n    loadPets: loadPets\n  };\n}();\n\nexports.default = componentPetFinder;\n\n},{\"./petfinder\":4,\"./utils\":5,\"lodash\":\"lodash\",\"rx\":\"rx\"}],4:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _rx = require('rx');\n\nvar _rx2 = _interopRequireDefault(_rx);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar PF = function () {\n\n  var endpoint = 'https://api.petfinder.com';\n  var methodBreedList = '/breed.list';\n  var methodFindPets = '/shelter.getPets';\n  var shelterID = 'MN36';\n  var APIkey = '454b72d5b9fc8fca72c7a461a5ac46d2';\n  var format = 'json';\n\n  var $container = jQuery('.component-pet-finder');\n\n  //\n  // Get Breeds\n  //\n  var getBreeds = function getBreeds() {\n\n    var animalType = $container.data(\"animal-type\"),\n        url = endpoint + methodBreedList + '?key=' + APIkey + '&animal=' + animalType + '&format=' + format + '&callback=?';\n\n    return jQuery.ajax({\n      url: url,\n      dataType: 'jsonp',\n      beforeSend: function beforeSend(xhr) {\n        // jQuery('.component-pet-finder .spinner').removeClass('is-hidden');\n      },\n      success: function success() {\n        // jQuery('.component-pet-finder .spinner').addClass('is-hidden');\n      }\n    }).promise();\n  };\n\n  //\n  // Generic search\n  //\n  var getPets = function getPets() {\n\n    var url = endpoint + methodFindPets + '?key=' + APIkey + '&id=' + shelterID + '&count=1000' + '&format=' + format + '&callback=?';\n    console.log(\"url: \", url);\n    return jQuery.ajax({\n      url: url,\n      dataType: 'jsonp',\n      beforeSend: function beforeSend(xhr) {\n        jQuery('.component-pet-finder .spinner').removeClass('is-hidden');\n        console.log(\"url: \", url);\n      },\n      success: function success() {}\n    }).promise();\n  };\n\n  return {\n    getBreeds: getBreeds,\n    getPets: getPets\n  };\n}();\n\nexports.default = PF;\n\n},{\"rx\":\"rx\"}],5:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar Utils = function () {\n\n  var toInitialCase = function toInitialCase(string) {\n    return string.charAt(0).toUpperCase() + string.slice(1);\n  };\n\n  var hasClass = function hasClass(el, cls) {\n    return el.className && new RegExp(\"(\\\\s|^)\" + cls + \"(\\\\s|$)\").test(el.className);\n  };\n\n  return {\n    toInitialCase: toInitialCase,\n    hasClass: hasClass\n  };\n}();\n\nexports.default = Utils;\n\n},{}],6:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar Vendor = function () {\n\n  function initCarousel() {\n    jQuery('.component-marquees').slick();\n  }\n\n  function initFitvid() {\n    jQuery(\".component, .content\").fitVids();\n  }\n\n  return {\n    initCarousel: initCarousel,\n    initFitvid: initFitvid\n  };\n}();\n\nexports.default = Vendor;\n\n},{}]},{},[1])\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJhc3NldHMvanMvYXBwL2FwcC5qcyIsImFzc2V0cy9qcy9hcHAvY29tcG9uZW50LW1vYmlsZS1tZW51LmpzIiwiYXNzZXRzL2pzL2FwcC9jb21wb25lbnQtcGV0ZmluZGVyLmpzIiwiYXNzZXRzL2pzL2FwcC9wZXRmaW5kZXIuanMiLCJhc3NldHMvanMvYXBwL3V0aWxzLmpzIiwiYXNzZXRzL2pzL2FwcC92ZW5kb3IuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQ0FBOzs7O0FBQ0E7Ozs7QUFDQTs7Ozs7O0FBRUEsT0FBTyxRQUFQLEVBQWlCLEtBQWpCLENBQXVCLFlBQVc7O0FBRWhDO0FBQ0EsZ0NBQVcsSUFBWDtBQUNBLG1CQUFPLFlBQVA7QUFDQSxtQkFBTyxVQUFQO0FBQ0EsK0JBQUcsUUFBSDtBQUVELENBUkQ7Ozs7Ozs7OztBQ0pBOzs7Ozs7QUFFQSxJQUFNLHNCQUF1QixZQUFXOztBQUV0QyxNQUFJLFFBQVEsT0FBTyxhQUFQLENBQVo7QUFBQSxNQUNJLFlBQVksT0FBTyxnQkFBUCxDQURoQjtBQUFBLE1BRUksaUJBQWlCLE9BQU8sbUNBQVAsQ0FGckI7QUFBQSxNQUdJLGlCQUFpQixPQUFPLGlCQUFQLENBSHJCOztBQUtBLE1BQU0saUJBQWlCLFNBQWpCLGNBQWlCLEdBQU07O0FBRTNCLG1CQUFlLE1BQWYsQ0FBc0IsTUFBdEI7O0FBRUEsY0FBVSxLQUFWLENBQWdCLFVBQVMsQ0FBVCxFQUFZO0FBQzFCLFFBQUUsY0FBRjs7QUFFQSxVQUFHLE1BQU0sRUFBTixDQUFTLFVBQVQsQ0FBSCxFQUF5QjtBQUN2QixjQUFNLElBQU47QUFFRCxPQUhELE1BR087QUFDTCxjQUFNLE1BQU47QUFFRDs7QUFFRCxhQUFPLElBQVAsRUFBYSxXQUFiLENBQXlCLFdBQXpCO0FBRUQsS0FiRDtBQWVELEdBbkJEOztBQXFCQSxNQUFNLGFBQWEsU0FBYixVQUFhLENBQUMsSUFB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Ozs7Ozs7OztBQ2hFZixJQUFNLFFBQVUsWUFBTTs7QUFFcEIsTUFBSSxnQkFBZ0IsU0FBaEIsYUFBZ0IsQ0FBQyxNQUFELEVBQVk7QUFDOUIsV0FBTyxPQUFPLE1BQVAsQ0FBYyxDQUFkLEVBQWlCLFdBQWpCLEtBQWlDLE9BQU8sS0FBUCxDQUFhLENBQWIsQ0FBeEM7QUFDRCxHQUZEOztBQUlBLE1BQUksV0FBVyxTQUFYLFFBQVcsQ0FBQyxFQUFELEVBQUssR0FBTCxFQUFhO0FBQzFCLFdBQU8sR0FBRyxTQUFILElBQWdCLElBQUksTUFBSixDQUFXLFlBQVksR0FBWixHQUFrQixTQUE3QixFQUF3QyxJQUF4QyxDQUE2QyxHQUFHLFNBQWhELENBQXZCO0FBQ0QsR0FGRDs7QUFJQSxTQUFPO0FBQ0wsbUJBQWUsYUFEVjtBQUVMLGNBQVU7QUFGTCxHQUFQO0FBS0QsQ0FmYSxFQUFkOztrQkFpQmUsSzs7Ozs7Ozs7QUNqQmYsSUFBTSxTQUFVLFlBQVc7O0FBRXpCLFdBQVMsWUFBVCxHQUF3QjtBQUN0QixXQUFPLHFCQUFQLEVBQThCLEtBQTlCO0FBQ0Q7O0FBRUQsV0FBUyxVQUFULEdBQXNCO0FBQ3BCLFdBQU8sc0JBQVAsRUFBK0IsT0FBL0I7QUFDRDs7QUFFRCxTQUFPO0FBQ0wsa0JBQWMsWUFEVDtBQUVMLGdCQUFZO0FBRlAsR0FBUDtBQU1ELENBaEJjLEVBQWY7O2tCQWtCZSxNIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsImltcG9ydCBWZW5kb3IgZnJvbSAnLi92ZW5kb3InO1xuaW1wb3J0IFBGIGZyb20gJy4vY29tcG9uZW50LXBldGZpbmRlcic7XG5pbXBvcnQgbW9iaWxlTWVudSBmcm9tICcuL2NvbXBvbmVudC1tb2JpbGUtbWVudSc7XG5cbmpRdWVyeShkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG5cbiAgLy8gSW5pdGlhbGl6aW5nIC4uLlxuICBtb2JpbGVNZW51LmluaXQoKTtcbiAgVmVuZG9yLmluaXRDYXJvdXNlbCgpO1xuICBWZW5kb3IuaW5pdEZpdHZpZCgpO1xuICBQRi5sb2FkUGV0cygpO1xuXG59KTtcbiIsImltcG9ydCBTbGlkZW91dCBmcm9tICdzbGlkZW91dCc7XG5cbmNvbnN0IGNvbXBvbmVudE1vYmlsZU1lbnUgPSAoZnVuY3Rpb24oKSB7XG5cbiAgdmFyICRtZW51ID0galF1ZXJ5KCcubmF2LW1vYmlsZScpLFxuICAgICAgJG1lbnVJY29uID0galF1ZXJ5KCcudG9nZ2xlLWJ1dHRvbicpLFxuICAgICAgJG1lbnVDb250YWluZXIgPSBqUXVlcnkoJy5tZW51LW1vYmlsZS1uYXZpZ2F0aW9uLWNvbnRhaW5lcicpLFxuICAgICAgJHNsaWRlb3V0UGFuZWwgPSBqUXVlcnkoJy5zbGlkZW91dC1wYW5lbCcpO1xuXG4gIGNvbnN0IHNob3dNb2JpbGVNZW51ID0gKCkgPT4ge1xuXG4gICAgJG1lbnVDb250YWluZXIuZmFkZUluKCdzbG93Jyk7XG5cbiAgICAkbWVudUljb24uY2xpY2soZnVuY3Rpb24oZSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICBpZigkbWVudS5pcygnOnZpc2libGUnKSkge1xuICAgICAgICAkbWVudS5oaWRlKCk7XG5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICRtZW51LmZhZGVJbigpO1xuXG4gICAgICB9XG5cbiAgICAgIGpRdWVyeSh0aGlzKS50b2dnbGVDbGFzcyhcImlzLWFjdGl2ZVwiKTtcblxuICAgIH0pO1xuXG4gIH07XG5cbiAgY29uc3QgdG9nZ2xlTWVudSA9IChtZW51KSA9PiB7XG5cbiAgICAkbWVudUljb24uY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgICBtZW51LnRvZ2dsZSgpO1xuICAgIH0pO1xuXG4gIH07XG5cbiAgY29uc3QgaW5pdCA9ICgpID0+IHtcblxuICAgIHZhciBtZW51ID0gbmV3IFNsaWRlb3V0KHtcbiAgICAgICdwYW5lbCc6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb250ZW50JyksXG4gICAgICAnbWVudSc6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtZW51LW1vYmlsZScpLFxuICAgICAgJ3BhZGRpbmcnOiAyNTYsXG4gICAgICAndG9sZXJhbmNlJzogNzAsXG4gICAgICAnc2lkZSc6ICdyaWdodCcsXG4gICAgICAndG91Y2gnOiBmYWxzZVxuICAgIH0pO1xuXG4gICAgdG9nZ2xlTWVudShtZW51KTtcbiAgICBzaG93TW9iaWxlTWVudSgpO1xuXG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBpbml0OiBpbml0XG4gIH07XG5cbn0pKCk7XG5cbmV4cG9ydCBkZWZhdWx0IGNvbXBvbmVudE1vYmlsZU1lbnU7XG4iLCIvLyBpbXBvcnQgSXNvdG9wZSBmcm9tICdpc290b3BlLWxheW91dCc7XG5pbXBvcnQgUEYgZnJvbSAnLi9wZXRmaW5kZXInO1xuaW1wb3J0IFJ4IGZyb20gJ3J4Jztcbi8vIGltcG9ydCBpbWFnZXNsb2FkZWQgZnJvbSAnaW1hZ2VzbG9hZGVkJztcbmltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgVXRpbHMgZnJvbSAnLi91dGlscyc7XG5cbmNvbnN0IGNvbXBvbmVudFBldEZpbmRlciA9ICgoKSA9PiB7XG5cbiAgdmFyICRncmlkID0galF1ZXJ5KCcuY29tcG9uZW50LXBldC1maW5kZXItZ3JpZCcpLFxuICAgICAgJGdyaWRDb250YWluZXIgPSBqUXVlcnkoJy5jb21wb25lbnQtcGV0LWZpbmRlcicpLFxuICAgICAgJHNwaW5uZXIgPSBqUXVlcnkoJy5jb21wb25lbnQtcGV0LWZpbmRlciAuc3Bpbm5lcicpLFxuICAgICAgJGlucHV0WmlwY29kZSA9IGpRdWVyeSgnLmNvbXBvbmVudC1wZXQtZmluZGVyLWZpbHRlci16aXBjb2RlJyksXG4gICAgICAkaW5wdXRUeXBlID0galF1ZXJ5KCcuY29tcG9uZW50LXBldC1maW5kZXItZmlsdGVyLXR5cGUnKSxcbiAgICAgICRpbnB1dEJyZWVkcyA9IGpRdWVyeSgnLmNvbXBvbmVudC1wZXQtZmluZGVyLWZpbHRlci1icmVlZCcpLFxuICAgICAgJGlucHV0U2l6ZSA9IGpRdWVyeSgnLmNvbXBvbmVudC1wZXQtZmluZGVyLWZpbHRlci1zaXplJyksXG4gICAgICAkaW5wdXRBZ2UgPSBqUXVlcnkoJy5jb21wb25lbnQtcGV0LWZpbmRlci1maWx0ZXItYWdlJyksXG4gICAgICAkYnV0dG9uQ2xlYXIgPSBqUXVlcnkoJy5jb21wb25lbnQtcGV0LWZpbmRlci1maWx0ZXItY2xlYXInKSxcbiAgICAgICRtc2cgPSBqUXVlcnkoJy5jb21wb25lbnQtcGV0LWZpbmRlciAubXNnJyksXG4gICAgICBzZWxlY3RlZEZpbHRlcnMgPSB7XG4gICAgICAgIHR5cGU6IG51bGwsXG4gICAgICAgIGJyZWVkczogbnVsbCxcbiAgICAgICAgc2l6ZTogbnVsbCxcbiAgICAgICAgYWdlOiBudWxsXG4gICAgICB9O1xuXG4gIC8vXG4gIC8vIElzb3RvcGUgSW5pdGluZ1xuICAvL1xuICBjb25zdCBsb2FkUGV0cyA9ICgpID0+IHtcblxuICAgIGlmKCRncmlkLmxlbmd0aCkge1xuXG4gICAgICBSeC5PYnNlcnZhYmxlLmZyb21Qcm9taXNlKFBGLmdldFBldHMoKSkuc3Vic2NyaWJlKFxuXG4gICAgICAgIHBldHMgPT4ge1xuXG4gICAgICAgICAgY29uc29sZS5sb2coXCJwZXRzLnBldGZpbmRlci5wZXRzOiBcIiwgcGV0cyk7XG5cbiAgICAgICAgICBpbnNlcnRQZXRzSW50b0RPTShwZXRzLnBldGZpbmRlci5wZXRzLnBldCk7XG5cbiAgICAgICAgICAkZ3JpZC5pbWFnZXNMb2FkZWQoIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICBqUXVlcnkoJy5jb21wb25lbnQtcGV0LWZpbmRlciAuc3Bpbm5lcicpLmFkZENsYXNzKCdpcy1oaWRkZW4nKTtcblxuICAgICAgICAgICAgaWYgKCEkZ3JpZC5oYXNDbGFzcygnaXMtdmlzaWJsZScpKSB7XG4gICAgICAgICAgICAgICRncmlkLmFkZENsYXNzKCdpcy12aXNpYmxlJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGluaXRHcmlkKCk7XG5cbiAgICAgICAgICB9KTtcblxuICAgICAgICB9LFxuXG4gICAgICAgIGVycm9yID0+IHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3I6IFwiLCBlcnJvcik7XG4gICAgICAgIH1cblxuICAgICAgKTtcblxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBjb25zb2xlLmxvZygnTk9UIGxvYWRpbmcgcGV0cyAuLi4nKTtcbiAgICB9XG5cbiAgfTtcblxuXG4gIC8vXG4gIC8vIENsZWFyIGZpbHRlclxuICAvL1xuICBjb25zdCBjbGVhckZpbHRlcnMgPSBpc28gPT4ge1xuXG4gICAgJGlucHV0VHlwZS5wcm9wKCdzZWxlY3RlZEluZGV4JywgMCk7XG4gICAgJGlucHV0U2l6ZS5wcm9wKCdzZWxlY3RlZEluZGV4JywgMCk7XG4gICAgJGlucHV0QWdlLnByb3AoJ3NlbGVjdGVkSW5kZXgnLCAwKTtcbiAgICAkaW5wdXRCcmVlZHMudmFsKCcnKTtcblxuICAgIHNlbGVjdGVkRmlsdGVycyA9IHtcbiAgICAgIHR5cGU6IG51bGwsXG4gICAgICBicmVlZHM6IG51bGwsXG4gICAgICBzaXplOiBudWxsLFxuICAgICAgYWdlOiBudWxsXG4gICAgfTtcblxuICAgIGlzby5pc290b3BlKHtcbiAgICAgIGZpbHRlcjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH0pO1xuXG4gIH07XG5cblxuICAvL1xuICAvLyBDb25zdHJ1Y3QgYnJlZWQgY2xhc3Nlc1xuICAvL1xuICBjb25zdCBjcmVhdGVCcmVlZHNMaXN0ID0gKGJyZWVkcykgPT4ge1xuICAgIHZhciBicmVlZENsYXNzZXMgPSAnJztcblxuICAgIGlmKGJyZWVkcy5sZW5ndGgpIHtcbiAgICAgIGpRdWVyeS5lYWNoKGJyZWVkcywgKGluZGV4LCBicmVlZCkgPT4ge1xuICAgICAgICBpZihicmVlZC4kdCkge1xuICAgICAgICAgIGJyZWVkQ2xhc3NlcyA9IGJyZWVkQ2xhc3NlcyArPSAnICcgKyBicmVlZC4kdC50b0xvd2VyQ2FzZSgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgYnJlZWRDbGFzc2VzID0gYnJlZWRDbGFzc2VzICs9ICcgJyArIGJyZWVkcy4kdC50b0xvd2VyQ2FzZSgpO1xuICAgIH1cblxuICAgIHJldHVybiBicmVlZENsYXNzZXM7XG5cbiAgfTtcblxuXG4gIC8vXG4gIC8vIENyZWF0ZSBQZXQgSW1hZ2VcbiAgLy9cbiAgY29uc3QgY3JlYXRlUGV0SW1hZ2UgPSAocGV0KSA9PiB7XG4gICAgdmFyIGltZyA9ICdwaG90b3MnIGluIHBldC5tZWRpYSA/IHBldC5tZWRpYS5waG90b3MucGhvdG9bMl0uJHQgOiAnLi4vLi4vY29udGVudC90aGVtZXMvcGV0aGF2ZW4vYXNzZXRzL2ltZ3MvcGV0LWltZy1ub3Rmb3VuZC5qcGcnO1xuXG4gICAgcmV0dXJuIGltZztcbiAgfTtcblxuXG4gIC8vXG4gIC8vIEluc2VydCBQZXRzIEludG8gR3JpZFxuICAvL1xuICBjb25zdCBpbnNlcnRQZXRzSW50b0RPTSA9IHBldHMgPT4ge1xuXG4gICAgalF1ZXJ5LmVhY2gocGV0cywgKGtleSwgcGV0KSA9PiB7XG5cbiAgICAgIHZhciBicmVlZHMgPSBwZXQuYnJlZWRzLmJyZWVkLFxuICAgICAgICAgIGJyZWVkQ2xhc3NlcyA9IGNyZWF0ZUJyZWVkc0xpc3QoYnJlZWRzKSxcbiAgICAgICAgICBwZXRJbWFnZSA9IGNyZWF0ZVBldEltYWdlKHBldCk7XG5cbiAgICAgICRncmlkLmFwcGVuZChqUXVlcnkoXCI8YSBocmVmPSdodHRwczovL3d3dy5wZXRmaW5kZXIuY29tL3BldGRldGFpbC9cIiArIHBldC5pZC4kdCArIFwiJyBjbGFzcz0nZ3JpZC1pdGVtIHBldC1saW5rIFwiICsgYnJlZWRDbGFzc2VzICsgXCInIGRhdGEtdHlwZT0nXCIgKyBwZXQuYW5pbWFsLiR0ICsgXCInIGRhdGEtYnJlZWRzPSdcIiArIGJyZWVkQ2xhc3NlcyArIFwiJyBkYXRhLXNpemU9J1wiICsgcGV0LnNpemUuJHQgKyBcIicgZGF0YS1hZ2U9J1wiICsgcGV0LmFnZS4kdCArIFwiJyB0YXJnZXQ9J19ibGFuayc+PGltZyBzcmM9XCIgKyBwZXRJbWFnZSArIFwiIGNsYXNzPSdwZXQtaW1hZ2UnPjxoNCBjbGFzcz0ncGV0LW5hbWUnPlwiICsgcGV0Lm5hbWUuJHQgKyBcIjwvaDQ+PHAgY2xhc3M9J3BldC1icmVlZCc+PHN0cm9uZz5CcmVlZHM8L3N0cm9uZz5cIiArIGJyZWVkQ2xhc3NlcyArIFwiPC9wPjxwIGNsYXNzPSdwZXQtYWdlJz48c3Ryb25nPkFnZTo8L3N0cm9uZz4gXCIgKyBwZXQuYWdlLiR0ICsgXCI8L3A+PHAgY2xhc3M9J3BldC1zaXplJz48c3Ryb25nPlNpemU6PC9zdHJvbmc+IFwiICsgcGV0LnNpemUuJHQgKyBcIjwvcD48L2E+XCIpKTtcblxuICAgIH0pO1xuICB9O1xuXG5cbiAgLy9cbiAgLy8gU2V0IEFuaW1hbCBUeXBlXG4gIC8vXG4gIGNvbnN0IHNldFR5cGUgPSAoKSA9PiB7XG5cbiAgICBpZiAoJGlucHV0VHlwZS52YWwoKS5sZW5ndGggPT09IDApIHtcbiAgICAgIHNlbGVjdGVkRmlsdGVycy50eXBlID0gbnVsbDtcblxuICAgIH0gZWxzZSB7XG4gICAgICBzZWxlY3RlZEZpbHRlcnMudHlwZSA9ICRpbnB1dFR5cGUudmFsKCk7XG5cbiAgICB9XG4gIH07XG5cblxuICAvL1xuICAvLyBJc290b3BlIEluaXRpbmdcbiAgLy9cbiAgY29uc3QgaW5pdEdyaWQgPSAoKSA9PiB7XG5cbiAgICBpZiAoalF1ZXJ5KCcuY29tcG9uZW50LXBldC1maW5kZXItZ3JpZCcpLmxlbmd0aCkge1xuXG4gICAgICBjb25zdCBpc28gPSBqUXVlcnkoJy5jb21wb25lbnQtcGV0LWZpbmRlci1ncmlkJykuaXNvdG9wZSh7XG4gICAgICAgIGl0ZW1TZWxlY3RvcjogJy5ncmlkLWl0ZW0nLFxuICAgICAgICBwZXJjZW50UG9zaXRpb246IHRydWUsXG4gICAgICAgIG1hc29ucnk6IHtcbiAgICAgICAgICBjb2x1bW5XaWR0aDogJy5ncmlkLWl0ZW0nLFxuICAgICAgICAgIGd1dHRlcjogMlxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgc2V0VHlwZSgpO1xuICAgICAgZGV0ZWN0RmlsdGVyRXZlbnRzKGlzbyk7XG4gICAgICBmaWx0ZXJTZWxlY3Rpb24oaXNvKTtcblxuICAgIH1cblxuICB9O1xuXG5cblxuXG5cblxuXG4gIGZ1bmN0aW9uIGNvbnN0cnVjdEZpbHRlckNsYXNzKHNlbGVjdGVkT3B0aW9ucykge1xuXG4gICAgdmFyIHJlc3VsdCA9ICcnO1xuXG4gICAgZm9yICh2YXIgb3B0aW9uIGluIHNlbGVjdGVkT3B0aW9ucykge1xuXG4gICAgICBpZiAoc2VsZWN0ZWRPcHRpb25zLmhhc093blByb3BlcnR5KG9wdGlvbikpIHtcblxuICAgICAgICBpZiAob3B0aW9uID09PSAnYnJlZWRzJykge1xuICAgICAgICAgIHJlc3VsdCArPSAnLmdyaWQtaXRlbVtkYXRhLScgKyBvcHRpb24gKyAnKj1cIicgKyBzZWxlY3RlZE9wdGlvbnNbb3B0aW9uXSArICdcIl0nO1xuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzdWx0ICs9ICcuZ3JpZC1pdGVtW2RhdGEtJyArIG9wdGlvbiArICc9XCInICsgc2VsZWN0ZWRPcHRpb25zW29wdGlvbl0gKyAnXCJdJztcbiAgICAgICAgfVxuXG4gICAgICB9XG5cbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuXG4gIH1cblxuXG5cblxuXG5cblxuXG5cbiAgZnVuY3Rpb24gY29uc3RydWN0U2VsZWN0ZWRPcHRpb25zKCRpdGVtcykge1xuXG4gICAgdmFyIGZpbmFsU2VsZWN0ZWRPcHRpb25zO1xuXG4gICAgJGl0ZW1zLmZvckVhY2goIGZ1bmN0aW9uKGl0ZW1FbGVtKSB7XG5cbiAgICAgIHZhciAkaXRlbUVsZW0gPSBqUXVlcnkoaXRlbUVsZW0pWzBdO1xuXG4gICAgICB2YXIgZWxlbWVudCA9IHtcbiAgICAgICAgdHlwZTogJGl0ZW1FbGVtLmRhdGFzZXQudHlwZSxcbiAgICAgICAgYnJlZWRzOiAkaXRlbUVsZW0uZGF0YXNldC5icmVlZHMsXG4gICAgICAgIHNpemU6ICRpdGVtRWxlbS5kYXRhc2V0LnNpemUsXG4gICAgICAgIGFnZTogJGl0ZW1FbGVtLmRhdGFzZXQuYWdlXG4gICAgICB9O1xuXG4gICAgICAvLyBSZW1vdmUgdGhlIG51bGwgdmFsdWVzIC4uLlxuICAgICAgdmFyIHNlbGVjdGVkID0gXy5vbWl0Qnkoc2VsZWN0ZWRGaWx0ZXJzLCBfLmlzTnVsbCk7XG5cbiAgICAgIGlmIChzZWxlY3RlZC5icmVlZHMpIHtcblxuICAgICAgICBpZiAoc2VsZWN0ZWQuYnJlZWRzLmxlbmd0aCA+IDMpIHtcblxuICAgICAgICAgIHZhciBzZWxlY3RlZFdpdGhvdXRCcmVlZHMgPSB7XG4gICAgICAgICAgICB0eXBlOiBzZWxlY3RlZEZpbHRlcnMudHlwZSxcbiAgICAgICAgICAgIGFnZTogc2VsZWN0ZWRGaWx0ZXJzLmFnZSxcbiAgICAgICAgICAgIHNpemU6IHNlbGVjdGVkRmlsdGVycy5zaXplLFxuICAgICAgICAgICAgYnJlZWRzOiBzZWxlY3RlZC5icmVlZHNcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgZmluYWxTZWxlY3RlZE9wdGlvbnMgPSBfLm9taXRCeShzZWxlY3RlZFdpdGhvdXRCcmVlZHMsIF8uaXNOdWxsKTtcblxuICAgICAgICB9XG5cbiAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgZmluYWxTZWxlY3RlZE9wdGlvbnMgPSBzZWxlY3RlZDtcblxuICAgICAgfVxuXG4gICAgfSk7XG5cbiAgICByZXR1cm4gZmluYWxTZWxlY3RlZE9wdGlvbnM7XG5cbiAgfVxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuICAvL1xuICAvLyBGaWx0ZXIgU2VsZWN0aW9uXG4gIC8vXG4gIGNvbnN0IGZpbHRlclNlbGVjdGlvbiA9IGlzbyA9PiB7XG5cbiAgICBpc28uaXNvdG9wZSh7XG4gICAgICBpdGVtU2VsZWN0b3I6ICcuZ3JpZC1pdGVtJyxcbiAgICAgIHBlcmNlbnRQb3NpdGlvbjogdHJ1ZSxcbiAgICAgIG1hc29ucnk6IHtcbiAgICAgICAgY29sdW1uV2lkdGg6ICcuZ3JpZC1pdGVtJyxcbiAgICAgICAgZ3V0dGVyOiAyXG4gICAgICB9LFxuICAgICAgZmlsdGVyOiBjb25zdHJ1Y3RGaWx0ZXJDbGFzcyggY29uc3RydWN0U2VsZWN0ZWRPcHRpb25zKCBpc28uaXNvdG9wZSgnZ2V0SXRlbUVsZW1lbnRzJykgKSApXG5cbiAgICB9KTtcblxuICB9O1xuXG5cbiAgLy9cbiAgLy8gT24gZmlsdGVyIGNsZWFyaW5nXG4gIC8vXG4gIGNvbnN0IG9uQ2xlYXIgPSBpc28gPT4ge1xuXG4gICAgJGJ1dHRvbkNsZWFyLmNsaWNrKCAoKSA9PiB7XG5cbiAgICAgIGNsZWFyRmlsdGVycyhpc28pO1xuXG4gICAgfSk7XG5cbiAgfTtcblxuXG4gIC8vXG4gIC8vIE9uIFR5cGUgY2hhbmdlXG4gIC8vXG4gIGNvbnN0IG9uVHlwZSA9IGlzbyA9PiB7XG5cbiAgICAkaW5wdXRUeXBlLmNoYW5nZSggKCkgPT4ge1xuXG4gICAgICBzZXRUeXBlKCk7XG4gICAgICBmaWx0ZXJTZWxlY3Rpb24oaXNvKTtcblxuICAgIH0pO1xuXG4gIH07XG5cblxuICAvL1xuICAvLyBPbiBCcmVlZCBjaGFuZ2VcbiAgLy9cbiAgY29uc3Qgb25CcmVlZCA9IGlzbyA9PiB7XG5cbiAgICAkaW5wdXRCcmVlZHMua2V5dXAoICgpID0+IHtcblxuICAgICAgaWYgKCRpbnB1dEJyZWVkcy52YWwoKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgc2VsZWN0ZWRGaWx0ZXJzLmJyZWVkcyA9IG51bGw7XG5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNlbGVjdGVkRmlsdGVycy5icmVlZHMgPSAkaW5wdXRCcmVlZHMudmFsKCkudG9Mb3dlckNhc2UoKTtcblxuICAgICAgfVxuXG4gICAgICBmaWx0ZXJTZWxlY3Rpb24oaXNvKTtcblxuICAgIH0pO1xuXG4gIH07XG5cblxuICAvL1xuICAvLyBPbiBTaXplIGNoYW5nZVxuICAvL1xuICBjb25zdCBvblNpemUgPSBpc28gPT4ge1xuXG4gICAgJGlucHV0U2l6ZS5jaGFuZ2UoICgpID0+IHtcbiAgICAgIHNlbGVjdGVkRmlsdGVycy5zaXplID0gJGlucHV0U2l6ZS52YWwoKTtcbiAgICAgIGZpbHRlclNlbGVjdGlvbihpc28pO1xuICAgIH0pO1xuXG4gIH07XG5cblxuICAvL1xuICAvLyBPbiBBZ2UgY2hhbmdlXG4gIC8vXG4gIGNvbnN0IG9uQWdlID0gaXNvID0+IHtcblxuICAgICRpbnB1dEFnZS5jaGFuZ2UoICgpID0+IHtcbiAgICAgIHNlbGVjdGVkRmlsdGVycy5hZ2UgPSAkaW5wdXRBZ2UudmFsKCk7XG4gICAgICBmaWx0ZXJTZWxlY3Rpb24oaXNvKTtcbiAgICB9KTtcblxuICB9O1xuXG5cbiAgLy9cbiAgLy8gT24gRmluaXNoXG4gIC8vXG4gIGNvbnN0IG9uRmluaXNoID0gaXNvID0+IHtcblxuICAgIGlzby5pc290b3BlKCAnb24nLCAnYXJyYW5nZUNvbXBsZXRlJywgZnVuY3Rpb24oZmlsdGVyZWRJdGVtcykge1xuICAgICAgY2hlY2tGb3JFbXB0eVJlc3VsdHMoZmlsdGVyZWRJdGVtcyk7XG4gICAgfSk7XG5cbiAgICAvLyBtYW51YWxseSB0cmlnZ2VyIGluaXRpYWwgbGF5b3V0XG4gICAgLy8gaXNvLmlzb3RvcGUoKTtcblxuXG4gICAgLy8gaXNvLm9uKCdhcnJhbmdlQ29tcGxldGUnLCBmdW5jdGlvbihldmVudCwgZmlsdGVyZWRJdGVtcykge1xuICAgIC8vICAgY2hlY2tGb3JFbXB0eVJlc3VsdHMoZmlsdGVyZWRJdGVtcyk7XG4gICAgLy8gfSk7XG5cbiAgfTtcblxuXG4gIC8vXG4gIC8vIERldGVjdCBGaWx0ZXIgRXZlbnRzXG4gIC8vXG4gIGNvbnN0IGRldGVjdEZpbHRlckV2ZW50cyA9IGlzbyA9PiB7XG5cbiAgICBvblR5cGUoaXNvKTtcbiAgICBvbkJyZWVkKGlzbyk7XG4gICAgb25TaXplKGlzbyk7XG4gICAgb25BZ2UoaXNvKTtcbiAgICBvbkNsZWFyKGlzbyk7XG4gICAgb25GaW5pc2goaXNvKTtcblxuICB9O1xuXG5cbiAgLy9cbiAgLy8gQ2hlY2sgZm9yIGVtcHR5IHJlc3VsdHNcbiAgLy9cbiAgY29uc3QgY2hlY2tGb3JFbXB0eVJlc3VsdHMgPSBmaWx0ZXJlZEl0ZW1zID0+IHtcblxuICAgIGlmIChmaWx0ZXJlZEl0ZW1zLmxlbmd0aCA9PT0gMCkge1xuXG4gICAgICAkZ3JpZENvbnRhaW5lci5hZGRDbGFzcygnaXMtZW1wdHknKTtcblxuICAgIH0gZWxzZSB7XG5cbiAgICAgIGlmICgkZ3JpZENvbnRhaW5lci5oYXNDbGFzcygnaXMtZW1wdHknKSkge1xuICAgICAgICAkZ3JpZENvbnRhaW5lci5yZW1vdmVDbGFzcygnaXMtZW1wdHknKTtcbiAgICAgIH1cblxuICAgIH1cblxuICB9O1xuXG5cbiAgcmV0dXJuIHtcbiAgICBsb2FkUGV0czogbG9hZFBldHNcbiAgfTtcblxufSkoKTtcblxuZXhwb3J0IGRlZmF1bHQgY29tcG9uZW50UGV0RmluZGVyO1xuIiwiaW1wb3J0IFJ4IGZyb20gJ3J4JztcblxuY29uc3QgUEYgPSAoZnVuY3Rpb24oKSB7XG5cbiAgbGV0IGVuZHBvaW50ID0gJ2h0dHBzOi8vYXBpLnBldGZpbmRlci5jb20nO1xuICBsZXQgbWV0aG9kQnJlZWRMaXN0ID0gJy9icmVlZC5saXN0JztcbiAgbGV0IG1ldGhvZEZpbmRQZXRzID0gJy9zaGVsdGVyLmdldFBldHMnO1xuICBsZXQgc2hlbHRlcklEID0gJ01OMzYnO1xuICBsZXQgQVBJa2V5ID0gJzQ1NGI3MmQ1YjlmYzhmY2E3MmM3YTQ2MWE1YWM0NmQyJztcbiAgbGV0IGZvcm1hdCA9ICdqc29uJztcblxuICBsZXQgJGNvbnRhaW5lciA9IGpRdWVyeSgnLmNvbXBvbmVudC1wZXQtZmluZGVyJyk7XG5cblxuICAvL1xuICAvLyBHZXQgQnJlZWRzXG4gIC8vXG4gIGNvbnN0IGdldEJyZWVkcyA9IGZ1bmN0aW9uKCkge1xuXG4gICAgdmFyIGFuaW1hbFR5cGUgPSAkY29udGFpbmVyLmRhdGEoXCJhbmltYWwtdHlwZVwiKSxcbiAgICAgICAgdXJsID0gZW5kcG9pbnQgKyBtZXRob2RCcmVlZExpc3QgKyAnP2tleT0nICsgQVBJa2V5ICsgJyZhbmltYWw9JyArIGFuaW1hbFR5cGUgKyAnJmZvcm1hdD0nICsgZm9ybWF0ICsgJyZjYWxsYmFjaz0/JztcblxuICAgIHJldHVybiBqUXVlcnkuYWpheCh7XG4gICAgICB1cmw6IHVybCxcbiAgICAgIGRhdGFUeXBlOiAnanNvbnAnLFxuICAgICAgYmVmb3JlU2VuZDogZnVuY3Rpb24oeGhyKSB7XG4gICAgICAgIC8vIGpRdWVyeSgnLmNvbXBvbmVudC1wZXQtZmluZGVyIC5zcGlubmVyJykucmVtb3ZlQ2xhc3MoJ2lzLWhpZGRlbicpO1xuICAgICAgfSxcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8galF1ZXJ5KCcuY29tcG9uZW50LXBldC1maW5kZXIgLnNwaW5uZXInKS5hZGRDbGFzcygnaXMtaGlkZGVuJyk7XG4gICAgICB9XG4gICAgfSkucHJvbWlzZSgpO1xuXG4gIH07XG5cblxuICAvL1xuICAvLyBHZW5lcmljIHNlYXJjaFxuICAvL1xuICBjb25zdCBnZXRQZXRzID0gZnVuY3Rpb24oKSB7XG5cbiAgICB2YXIgdXJsID0gZW5kcG9pbnQgKyBtZXRob2RGaW5kUGV0cyArICc/a2V5PScgKyBBUElrZXkgKyAnJmlkPScgKyBzaGVsdGVySUQgKyAnJmNvdW50PTEwMDAnICsgJyZmb3JtYXQ9JyArIGZvcm1hdCArICcmY2FsbGJhY2s9Pyc7XG5jb25zb2xlLmxvZyhcInVybDogXCIsIHVybCk7XG4gICAgcmV0dXJuIGpRdWVyeS5hamF4KHtcbiAgICAgIHVybDogdXJsLFxuICAgICAgZGF0YVR5cGU6ICdqc29ucCcsXG4gICAgICBiZWZvcmVTZW5kOiBmdW5jdGlvbiggeGhyICkge1xuICAgICAgICBqUXVlcnkoJy5jb21wb25lbnQtcGV0LWZpbmRlciAuc3Bpbm5lcicpLnJlbW92ZUNsYXNzKCdpcy1oaWRkZW4nKTtcbiAgICAgICAgY29uc29sZS5sb2coXCJ1cmw6IFwiLCB1cmwpO1xuICAgICAgfSxcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgfVxuICAgIH0pLnByb21pc2UoKTtcblxuICB9O1xuXG4gIHJldHVybiB7XG4gICAgZ2V0QnJlZWRzOiBnZXRCcmVlZHMsXG4gICAgZ2V0UGV0czogZ2V0UGV0c1xuICB9O1xuXG59KSgpO1xuXG5leHBvcnQgZGVmYXVsdCBQRjtcbiIsImNvbnN0IFV0aWxzID0gKCAoKSA9PiB7XG5cbiAgdmFyIHRvSW5pdGlhbENhc2UgPSAoc3RyaW5nKSA9PiB7XG4gICAgcmV0dXJuIHN0cmluZy5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHN0cmluZy5zbGljZSgxKTtcbiAgfTtcblxuICB2YXIgaGFzQ2xhc3MgPSAoZWwsIGNscykgPT4ge1xuICAgIHJldHVybiBlbC5jbGFzc05hbWUgJiYgbmV3IFJlZ0V4cChcIihcXFxcc3xeKVwiICsgY2xzICsgXCIoXFxcXHN8JClcIikudGVzdChlbC5jbGFzc05hbWUpO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgdG9Jbml0aWFsQ2FzZTogdG9Jbml0aWFsQ2FzZSxcbiAgICBoYXNDbGFzczogaGFzQ2xhc3NcbiAgfTtcblxufSkoKTtcblxuZXhwb3J0IGRlZmF1bHQgVXRpbHM7XG4iLCJjb25zdCBWZW5kb3IgPSAoZnVuY3Rpb24oKSB7XG5cbiAgZnVuY3Rpb24gaW5pdENhcm91c2VsKCkge1xuICAgIGpRdWVyeSgnLmNvbXBvbmVudC1tYXJxdWVlcycpLnNsaWNrKCk7XG4gIH1cblxuICBmdW5jdGlvbiBpbml0Rml0dmlkKCkge1xuICAgIGpRdWVyeShcIi5jb21wb25lbnQsIC5jb250ZW50XCIpLmZpdFZpZHMoKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgaW5pdENhcm91c2VsOiBpbml0Q2Fyb3VzZWwsXG4gICAgaW5pdEZpdHZpZDogaW5pdEZpdHZpZFxuICB9O1xuXG5cbn0pKCk7XG5cbmV4cG9ydCBkZWZhdWx0IFZlbmRvcjtcbiJdfQ==\n"]}